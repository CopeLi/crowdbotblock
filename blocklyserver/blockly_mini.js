var DOMParser=require("xmldom").DOMParser;
var Blockly={};
Blockly.pathToBlockly="./";Blockly.SVG_NS="http://www.w3.org/2000/svg";Blockly.HTML_NS="http://www.w3.org/1999/xhtml";Blockly.HSV_SATURATION=.45;Blockly.HSV_VALUE=.65;Blockly.makeColour=function(a){a%=360;var b=Blockly.HSV_VALUE;var c=Blockly.HSV_VALUE*(1-Blockly.HSV_SATURATION);var d=(b-c)*(a%60/60)+c;var e=(b-c)*(1-a%60/60)+c;var f,g,h;if(0<=a&&a<60){f=b;g=d;h=c}else if(60<=a&&a<120){f=e;g=b;h=c}else if(120<=a&&a<180){f=c;g=b;h=d}else if(180<=a&&a<240){f=c;g=e;h=b}else if(240<=a&&a<300){f=d;g=c;h=b}else if(300<=a&&a<360){f=b;g=c;h=e}else{f=0;g=0;h=0}f=Math.floor(f*16);g=Math.floor(g*16);h=Math.floor(h*16);var i="0123456789abcdef";return"#"+i.charAt(f)+i.charAt(g)+i.charAt(h)};Blockly.INPUT_VALUE=1;Blockly.OUTPUT_VALUE=2;Blockly.NEXT_STATEMENT=3;Blockly.PREVIOUS_STATEMENT=4;Blockly.LOCAL_VARIABLE=5;Blockly.DUMMY_INPUT=6;Blockly.OPPOSITE_TYPE=[];Blockly.OPPOSITE_TYPE[Blockly.INPUT_VALUE]=Blockly.OUTPUT_VALUE;Blockly.OPPOSITE_TYPE[Blockly.OUTPUT_VALUE]=Blockly.INPUT_VALUE;Blockly.OPPOSITE_TYPE[Blockly.NEXT_STATEMENT]=Blockly.PREVIOUS_STATEMENT;Blockly.OPPOSITE_TYPE[Blockly.PREVIOUS_STATEMENT]=Blockly.NEXT_STATEMENT;Blockly.SOUNDS_={};Blockly.selected=null;Blockly.editable=true;Blockly.highlightedConnection_=null;Blockly.localConnection_=null;Blockly.DRAG_RADIUS=5;Blockly.SNAP_RADIUS=12;Blockly.BUMP_DELAY=250;Blockly.svgDoc=null;Blockly.mainWorkspace=null;Blockly.svgSize=function(){return{width:Blockly.svg.cachedWidth_,height:Blockly.svg.cachedHeight_,top:Blockly.svg.cachedTop_,left:Blockly.svg.cachedLeft_}};Blockly.svgResize=function(){var a=Blockly.svg.parentNode.offsetWidth;var b=Blockly.svg.parentNode.offsetHeight;if(Blockly.svg.cachedWidth_!=a){Blockly.svg.setAttribute("width",a+"px");Blockly.svg.cachedWidth_=a}if(Blockly.svg.cachedHeight_!=b){Blockly.svg.setAttribute("height",b+"px");Blockly.svg.cachedHeight_=b}var c=Blockly.svg.getBoundingClientRect();Blockly.svg.cachedLeft_=c.left;Blockly.svg.cachedTop_=c.top};Blockly.onMouseDown_=function(a){Blockly.Block.terminateDrag_();Blockly.hideChaff();Blockly.removeAllRanges();if(Blockly.isTargetInput_(a)||Blockly.Mutator&&Blockly.Mutator.isOpen){return}if(Blockly.selected&&a.target.nodeName=="svg"){Blockly.selected.unselect()}if(Blockly.isRightButton(a)){if(Blockly.ContextMenu){Blockly.showContextMenu_(a.clientX,a.clientY)}}else if(a.target.nodeName=="svg"||false){Blockly.mainWorkspace.dragMode=true;Blockly.mainWorkspace.startDragMouseX=a.clientX;Blockly.mainWorkspace.startDragMouseY=a.clientY;Blockly.mainWorkspace.startDragMetrics=Blockly.getMainWorkspaceMetrics();Blockly.mainWorkspace.startScrollX=Blockly.mainWorkspace.scrollX;Blockly.mainWorkspace.startScrollY=Blockly.mainWorkspace.scrollY}};Blockly.onMouseUp_=function(a){Blockly.setCursorHand_(false);Blockly.mainWorkspace.dragMode=false};Blockly.onMouseMove_=function(a){if(Blockly.mainWorkspace.dragMode){Blockly.removeAllRanges();var b=a.clientX-Blockly.mainWorkspace.startDragMouseX;var c=a.clientY-Blockly.mainWorkspace.startDragMouseY;var d=Blockly.mainWorkspace.startDragMetrics;var e=Blockly.mainWorkspace.startScrollX+b;var f=Blockly.mainWorkspace.startScrollY+c;e=Math.min(e,-d.contentLeft);f=Math.min(f,-d.contentTop);e=Math.max(e,d.viewWidth-d.contentLeft-d.contentWidth);f=Math.max(f,d.viewHeight-d.contentTop-d.contentHeight);Blockly.mainWorkspace.scrollbar.set(-e-d.contentLeft,-f-d.contentTop)}};Blockly.onKeyDown_=function(a){if(Blockly.isTargetInput_(a)){return}if(a.keyCode==27){Blockly.hideChaff();if(Blockly.Mutator&&Blockly.Mutator.isOpen){Blockly.Mutator.closeDialog()}}else if(a.keyCode==8||a.keyCode==46){if(Blockly.selected&&(!Blockly.Mutator||!Blockly.Mutator.isOpen)){Blockly.hideChaff();Blockly.playAudio("delete");Blockly.selected.destroy(true)}a.preventDefault()}};Blockly.showContextMenu_=function(a,b){var c=[];var d={enabled:false};d.text=Blockly.MSG_HELP;d.callback=function(){};c.push(d);Blockly.ContextMenu.show(a,b,c)};Blockly.onContextMenu_=function(a){if(!Blockly.isTargetInput_(a)&&Blockly.ContextMenu){a.preventDefault()}};Blockly.hideChaff=function(a){Blockly.Tooltip&&Blockly.Tooltip.hide();Blockly.ContextMenu&&Blockly.ContextMenu.hide();Blockly.FieldDropdown.hideMenu();if(Blockly.Toolbox&&!a&&Blockly.Toolbox.flyout_.autoClose){Blockly.Toolbox.clearSelection()}};Blockly.removeAllRanges=function(){if(getSelection){var a=getSelection();if(a&&a.removeAllRanges){a.removeAllRanges();setTimeout(function(){getSelection().removeAllRanges()},0)}}};Blockly.isTargetInput_=function(a){return a.target.type=="textarea"||a.target.type=="text"};Blockly.loadAudio_=function(a){if(true){return}var b=new Audio(Blockly.pathToBlockly+"media/"+a+".wav");if(b&&b.play){b.play();b.pause();Blockly.SOUNDS_[a]=b}};Blockly.playAudio=function(a){};Blockly.setCursorHand_=function(a){if(false){return}var b="";if(a){b="url("+Blockly.pathToBlockly+"media/handclosed.cur) 7 3, auto"}};Blockly.getMainWorkspaceMetrics=function(){var a=Blockly.svgSize();if(Blockly.Toolbox){a.width-=Blockly.Toolbox.width}var b=a.width-Blockly.Scrollbar.scrollbarThickness;var c=a.height-Blockly.Scrollbar.scrollbarThickness;try{var d=Blockly.mainWorkspace.getCanvas().getBBox()}catch(e){return null}if(d.width==-Infinity&&d.height==-Infinity){d={width:0,height:0,x:0,y:0}}var f=Math.min(d.x-b/2,d.x+d.width-b);var g=Math.max(d.x+d.width+b/2,d.x+b);var h=Math.min(d.y-c/2,d.y+d.height-c);var i=Math.max(d.y+d.height+c/2,d.y+c);var j=0;if(Blockly.Toolbox&&!Blockly.RTL){j=Blockly.Toolbox.width}return{viewHeight:a.height,viewWidth:a.width,contentHeight:i-h,contentWidth:g-f,viewTop:-Blockly.mainWorkspace.scrollY,viewLeft:-Blockly.mainWorkspace.scrollX,contentTop:h,contentLeft:f,absoluteTop:0,absoluteLeft:j}};Blockly.setMainWorkspaceMetrics=function(a){var b=Blockly.getMainWorkspaceMetrics();if(typeof a.x=="number"){Blockly.mainWorkspace.scrollX=-b.contentWidth*a.x-b.contentLeft}if(typeof a.y=="number"){Blockly.mainWorkspace.scrollY=-b.contentHeight*a.y-b.contentTop}var c="translate("+(Blockly.mainWorkspace.scrollX+b.absoluteLeft)+","+(Blockly.mainWorkspace.scrollY+b.absoluteTop)+")";Blockly.mainWorkspace.getCanvas().setAttribute("transform",c);Blockly.mainWorkspace.getBubbleCanvas().setAttribute("transform",c)};Blockly.cssLoaded=function(){Blockly.Toolbox&&Blockly.Toolbox.redraw()};Blockly.Generator={};Blockly.Generator.NAME_TYPE="generated_function";Blockly.Generator.languages={};Blockly.Generator.get=function(a){if(!(a in Blockly.Generator.languages)){var b={};b.blockToCode=function(b){if(!b){return""}var c=this[b.type];if(!c){throw'Language "'+a+'" does not know how to generate code '+'for block type "'+b.type+'".'}var d=c.call(b);if(d instanceof Array){if(b.disabled){d[0]=""}return[this.scrub_(b,d[0]),d[1]]}else{if(b.disabled){d=""}return this.scrub_(b,d)}};b.valueToCode=function(a,b,c){var d=a.getInputTargetBlock(b);if(!d){return""}var e=this.blockToCode(d);if(!(e instanceof Array)){throw'Expecting tuple from value block "'+d.type+'".'}var f=e[0];var g=e[1];if(f&&c<=g){f="("+f+")"}return f};b.statementToCode=function(a,b){var c=a.getInputTargetBlock(b);var d=this.blockToCode(c);if(typeof d!="string"){throw'Expecting code from statement block "'+c.type+'".'}if(d){d=Blockly.Generator.prefixLines(d,"  ")}return d};Blockly.Generator.languages[a]=b}return Blockly.Generator.languages[a]};Blockly.Generator.workspaceToCode=function(a){var b=[];var c=Blockly.Generator.get(a);c.init();var d=Blockly.mainWorkspace.getTopBlocks(true);for(var e=0,f;f=d[e];e++){var g=c.blockToCode(f,true);if(g instanceof Array){g=g[0]}if(f.outputConnection&&c.scrubNakedValue&&g){g=c.scrubNakedValue(g)}b.push(g)}b=b.join("\n");b=c.finish(b);b=b.replace(/^\s+\n/,"");b=b.replace(/\n\s+$/,"\n");b=b.replace(/[ \t]+\n/g,"\n");return b};Blockly.Generator.prefixLines=function(a,b){return b+a.replace(/\n(.)/g,"\n"+b+"$1")};Blockly.Generator.allNestedComments=function(a){var b=[];var c=a.getDescendants();for(var d=0;d<c.length;d++){var e=c[d].getCommentText();if(e){b.push(e)}}if(b.length){b.push("")}return b.join("\n")};Blockly.JavaScript=Blockly.Generator.get("JavaScript");Blockly.JavaScript.RESERVED_WORDS_="break,case,catch,continue,debugger,default,delete,do,else,finally,for,function,if,in,instanceof,new,return,switch,this,throw,try,typeof,var,void,while,with,"+"class,enum,export,extends,import,super,implements,interface,let,package,private,protected,public,static,yield,"+"const,null,true,false,"+"Array,ArrayBuffer,Boolean,Date,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Error,eval,EvalError,Float32Array,Float64Array,Function,Infinity,Int16Array,Int32Array,Int8Array,isFinite,isNaN,Iterator,JSON,Math,NaN,Number,Object,parseFloat,parseInt,RangeError,ReferenceError,RegExp,StopIteration,String,SyntaxError,TypeError,Uint16Array,Uint32Array,Uint8Array,Uint8ClampedArray,undefined,uneval,URIError,"+"applicationCache,closed,Components,content,_content,controllers,crypto,defaultStatus,dialogArguments,directories,document,frameElement,frames,fullScreen,globalStorage,history,innerHeight,innerWidth,length,location,locationbar,localStorage,menubar,messageManager,mozAnimationStartTime,mozInnerScreenX,mozInnerScreenY,mozPaintCount,name,navigator,opener,outerHeight,outerWidth,pageXOffset,pageYOffset,parent,performance,personalbar,pkcs11,returnValue,screen,screenX,screenY,scrollbars,scrollMaxX,scrollMaxY,scrollX,scrollY,self,sessionStorage,sidebar,status,statusbar,toolbar,top,URL,window,"+"addEventListener,alert,atob,back,blur,btoa,captureEvents,clearImmediate,clearInterval,clearTimeout,close,confirm,disableExternalCapture,dispatchEvent,dump,enableExternalCapture,escape,find,focus,forward,GeckoActiveXObject,getAttention,getAttentionWithCycleCount,getComputedStyle,getSelection,home,matchMedia,maximize,minimize,moveBy,moveTo,mozRequestAnimationFrame,open,openDialog,postMessage,print,prompt,QueryInterface,releaseEvents,removeEventListener,resizeBy,resizeTo,restore,routeEvent,scroll,scrollBy,scrollByLines,scrollByPages,scrollTo,setCursor,setImmediate,setInterval,setResizable,setTimeout,showModalDialog,sizeToContent,stop,unescape,updateCommands,XPCNativeWrapper,XPCSafeJSObjectWrapper,"+"onabort,onbeforeunload,onblur,onchange,onclick,onclose,oncontextmenu,ondevicemotion,ondeviceorientation,ondragdrop,onerror,onfocus,onhashchange,onkeydown,onkeypress,onkeyup,onload,onmousedown,onmousemove,onmouseout,onmouseover,onmouseup,onmozbeforepaint,onpaint,onpopstate,onreset,onresize,onscroll,onselect,onsubmit,onunload,onpageshow,onpagehide,"+"Image,Option,Worker,"+"Event,Range,File,FileReader,Blob,BlobBuilder,"+"Attr,CDATASection,CharacterData,Comment,console,DocumentFragment,DocumentType,DomConfiguration,DOMError,DOMErrorHandler,DOMException,DOMImplementation,DOMImplementationList,DOMImplementationRegistry,DOMImplementationSource,DOMLocator,DOMObject,DOMString,DOMStringList,DOMTimeStamp,DOMUserData,Entity,EntityReference,MediaQueryList,MediaQueryListListener,NameList,NamedNodeMap,Node,NodeFilter,NodeIterator,NodeList,Notation,Plugin,PluginArray,ProcessingInstruction,SharedWorker,Text,TimeRanges,Treewalker,TypeInfo,UserDataHandler,Worker,WorkerGlobalScope,"+"HTMLDocument,HTMLElement,HTMLAnchorElement,HTMLAppletElement,HTMLAudioElement,HTMLAreaElement,HTMLBaseElement,HTMLBaseFontElement,HTMLBodyElement,HTMLBRElement,HTMLButtonElement,HTMLCanvasElement,HTMLDirectoryElement,HTMLDivElement,HTMLDListElement,HTMLEmbedElement,HTMLFieldSetElement,HTMLFontElement,HTMLFormElement,HTMLFrameElement,HTMLFrameSetElement,HTMLHeadElement,HTMLHeadingElement,HTMLHtmlElement,HTMLHRElement,HTMLIFrameElement,HTMLImageElement,HTMLInputElement,HTMLKeygenElement,HTMLLabelElement,HTMLLIElement,HTMLLinkElement,HTMLMapElement,HTMLMenuElement,HTMLMetaElement,HTMLModElement,HTMLObjectElement,HTMLOListElement,HTMLOptGroupElement,HTMLOptionElement,HTMLOutputElement,HTMLParagraphElement,HTMLParamElement,HTMLPreElement,HTMLQuoteElement,HTMLScriptElement,HTMLSelectElement,HTMLSourceElement,HTMLSpanElement,HTMLStyleElement,HTMLTableElement,HTMLTableCaptionElement,HTMLTableCellElement,HTMLTableDataCellElement,HTMLTableHeaderCellElement,HTMLTableColElement,HTMLTableRowElement,HTMLTableSectionElement,HTMLTextAreaElement,HTMLTimeElement,HTMLTitleElement,HTMLTrackElement,HTMLUListElement,HTMLUnknownElement,HTMLVideoElement,"+"HTMLCanvasElement,CanvasRenderingContext2D,CanvasGradient,CanvasPattern,TextMetrics,ImageData,CanvasPixelArray,HTMLAudioElement,HTMLVideoElement,NotifyAudioAvailableEvent,HTMLCollection,HTMLAllCollection,HTMLFormControlsCollection,HTMLOptionsCollection,HTMLPropertiesCollection,DOMTokenList,DOMSettableTokenList,DOMStringMap,RadioNodeList,"+"SVGDocument,SVGElement,SVGAElement,SVGAltGlyphElement,SVGAltGlyphDefElement,SVGAltGlyphItemElement,SVGAnimationElement,SVGAnimateElement,SVGAnimateColorElement,SVGAnimateMotionElement,SVGAnimateTransformElement,SVGSetElement,SVGCircleElement,SVGClipPathElement,SVGColorProfileElement,SVGCursorElement,SVGDefsElement,SVGDescElement,SVGEllipseElement,SVGFilterElement,SVGFilterPrimitiveStandardAttributes,SVGFEBlendElement,SVGFEColorMatrixElement,SVGFEComponentTransferElement,SVGFECompositeElement,SVGFEConvolveMatrixElement,SVGFEDiffuseLightingElement,SVGFEDisplacementMapElement,SVGFEDistantLightElement,SVGFEFloodElement,SVGFEGaussianBlurElement,SVGFEImageElement,SVGFEMergeElement,SVGFEMergeNodeElement,SVGFEMorphologyElement,SVGFEOffsetElement,SVGFEPointLightElement,SVGFESpecularLightingElement,SVGFESpotLightElement,SVGFETileElement,SVGFETurbulenceElement,SVGComponentTransferFunctionElement,SVGFEFuncRElement,SVGFEFuncGElement,SVGFEFuncBElement,SVGFEFuncAElement,SVGFontElement,SVGFontFaceElement,SVGFontFaceFormatElement,SVGFontFaceNameElement,SVGFontFaceSrcElement,SVGFontFaceUriElement,SVGForeignObjectElement,SVGGElement,SVGGlyphElement,SVGGlyphRefElement,SVGGradientElement,SVGLinearGradientElement,SVGRadialGradientElement,SVGHKernElement,SVGImageElement,SVGLineElement,SVGMarkerElement,SVGMaskElement,SVGMetadataElement,SVGMissingGlyphElement,SVGMPathElement,SVGPathElement,SVGPatternElement,SVGPolylineElement,SVGPolygonElement,SVGRectElement,SVGScriptElement,SVGStopElement,SVGStyleElement,SVGSVGElement,SVGSwitchElement,SVGSymbolElement,SVGTextElement,SVGTextPathElement,SVGTitleElement,SVGTRefElement,SVGTSpanElement,SVGUseElement,SVGViewElement,SVGVKernElement,"+"SVGAngle,SVGColor,SVGICCColor,SVGElementInstance,SVGElementInstanceList,SVGLength,SVGLengthList,SVGMatrix,SVGNumber,SVGNumberList,SVGPaint,SVGPoint,SVGPointList,SVGPreserveAspectRatio,SVGRect,SVGStringList,SVGTransform,SVGTransformList,"+"SVGAnimatedAngle,SVGAnimatedBoolean,SVGAnimatedEnumeration,SVGAnimatedInteger,SVGAnimatedLength,SVGAnimatedLengthList,SVGAnimatedNumber,SVGAnimatedNumberList,SVGAnimatedPreserveAspectRatio,SVGAnimatedRect,SVGAnimatedString,SVGAnimatedTransformList,"+"SVGPathSegList,SVGPathSeg,SVGPathSegArcAbs,SVGPathSegArcRel,SVGPathSegClosePath,SVGPathSegCurvetoCubicAbs,SVGPathSegCurvetoCubicRel,SVGPathSegCurvetoCubicSmoothAbs,SVGPathSegCurvetoCubicSmoothRel,SVGPathSegCurvetoQuadraticAbs,SVGPathSegCurvetoQuadraticRel,SVGPathSegCurvetoQuadraticSmoothAbs,SVGPathSegCurvetoQuadraticSmoothRel,SVGPathSegLinetoAbs,SVGPathSegLinetoHorizontalAbs,SVGPathSegLinetoHorizontalRel,SVGPathSegLinetoRel,SVGPathSegLinetoVerticalAbs,SVGPathSegLinetoVerticalRel,SVGPathSegMovetoAbs,SVGPathSegMovetoRel,ElementTimeControl,TimeEvent,SVGAnimatedPathData,"+"SVGAnimatedPoints,SVGColorProfileRule,SVGCSSRule,SVGExternalResourcesRequired,SVGFitToViewBox,SVGLangSpace,SVGLocatable,SVGRenderingIntent,SVGStylable,SVGTests,SVGTextContentElement,SVGTextPositioningElement,SVGTransformable,SVGUnitTypes,SVGURIReference,SVGViewSpec,SVGZoomAndPan";Blockly.JavaScript.ORDER_ATOMIC=0;Blockly.JavaScript.ORDER_MEMBER=1;Blockly.JavaScript.ORDER_NEW=1;Blockly.JavaScript.ORDER_FUNCTION_CALL=2;Blockly.JavaScript.ORDER_INCREMENT=3;Blockly.JavaScript.ORDER_DECREMENT=3;Blockly.JavaScript.ORDER_LOGICAL_NOT=4;Blockly.JavaScript.ORDER_BITWISE_NOT=4;Blockly.JavaScript.ORDER_UNARY_PLUS=4;Blockly.JavaScript.ORDER_UNARY_NEGATION=4;Blockly.JavaScript.ORDER_TYPEOF=4;Blockly.JavaScript.ORDER_VOID=4;Blockly.JavaScript.ORDER_DELETE=4;Blockly.JavaScript.ORDER_MULTIPLICATION=5;Blockly.JavaScript.ORDER_DIVISION=5;Blockly.JavaScript.ORDER_MODULUS=5;Blockly.JavaScript.ORDER_ADDITION=6;Blockly.JavaScript.ORDER_SUBTRACTION=6;Blockly.JavaScript.ORDER_BITWISE_SHIFT=7;Blockly.JavaScript.ORDER_RELATIONAL=8;Blockly.JavaScript.ORDER_IN=8;Blockly.JavaScript.ORDER_INSTANCEOF=8;Blockly.JavaScript.ORDER_EQUALITY=9;Blockly.JavaScript.ORDER_BITWISE_AND=10;Blockly.JavaScript.ORDER_BITWISE_XOR=11;Blockly.JavaScript.ORDER_BITWISE_OR=12;Blockly.JavaScript.ORDER_LOGICAL_AND=13;Blockly.JavaScript.ORDER_LOGICAL_OR=14;Blockly.JavaScript.ORDER_CONDITIONAL=15;Blockly.JavaScript.ORDER_ASSIGNMENT=16;Blockly.JavaScript.ORDER_COMMA=17;Blockly.JavaScript.ORDER_NONE=99;Blockly.JavaScript.init=function(){Blockly.JavaScript.definitions_={};if(Blockly.Variables){if(!Blockly.JavaScript.variableDB_){Blockly.JavaScript.variableDB_=new Blockly.Names(Blockly.JavaScript.RESERVED_WORDS_.split(","))}else{Blockly.JavaScript.variableDB_.reset()}var a=[];var b=Blockly.Variables.allVariables();for(var c=0;c<b.length;c++){a[c]="var "+Blockly.JavaScript.variableDB_.getDistinctName(b[c],Blockly.Variables.NAME_TYPE)+";"}Blockly.JavaScript.definitions_["variables"]=a.join("\n")}};Blockly.JavaScript.finish=function(a){var b=[];for(var c in Blockly.JavaScript.definitions_){b.push(Blockly.JavaScript.definitions_[c])}return"var five = require('johnny-five');\nvar board = new five.Board();\nboard.on('ready', function(){\n"+b.join("\n")+"\n\n"+a+"\n});"};Blockly.JavaScript.scrubNakedValue=function(a){return a+";\n"};Blockly.JavaScript.quote_=function(a){a=a.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'");return"'"+a+"'"};Blockly.JavaScript.scrub_=function(a,b){if(b===null){return""}var c="";if(!a.outputConnection||!a.outputConnection.targetConnection){var d=a.getCommentText();if(d){c+=Blockly.Generator.prefixLines(d,"// ")+"\n"}for(var e=0;e<a.inputList.length;e++){if(a.inputList[e].type==Blockly.INPUT_VALUE){var f=a.inputList[e].targetBlock();if(f){var d=Blockly.Generator.allNestedComments(f);if(d){c+=Blockly.Generator.prefixLines(d,"// ")}}}}}var g=a.nextConnection&&a.nextConnection.targetBlock();var h=this.blockToCode(g);return c+b+h};if(!Blockly.Language)Blockly.Language={};Blockly.Language.variables_get={category:null,helpUrl:Blockly.LANG_VARIABLES_GET_HELPURL,init:function(){this.appendTitle(Blockly.LANG_VARIABLES_GET_TITLE_1);this.appendTitle(new Blockly.FieldDropdown(Blockly.Variables.dropdownCreate,Blockly.Variables.dropdownChange),"VAR").setText(Blockly.LANG_VARIABLES_GET_ITEM);this.setOutput(true,null);this.setTooltip(Blockly.LANG_VARIABLES_GET_TOOLTIP_1)},getVars:function(){return[this.getTitleText("VAR")]},renameVar:function(a,b){if(Blockly.Names.equals(a,this.getTitleText("VAR"))){this.setTitleText(b,"VAR")}}};Blockly.Language.variables_set={category:null,helpUrl:Blockly.LANG_VARIABLES_SET_HELPURL,init:function(){this.appendTitle(Blockly.LANG_VARIABLES_SET_TITLE_1);this.appendTitle(new Blockly.FieldDropdown(Blockly.Variables.dropdownCreate,Blockly.Variables.dropdownChange),"VAR").setText(Blockly.LANG_VARIABLES_SET_ITEM);this.appendInput("",Blockly.INPUT_VALUE,"VALUE",null);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_VARIABLES_SET_TOOLTIP_1)},getVars:function(){return[this.getTitleText("VAR")]},renameVar:function(a,b){if(Blockly.Names.equals(a,this.getTitleText("VAR"))){this.setTitleText(b,"VAR")}}};if(!Blockly.Language)Blockly.Language={};Blockly.Language.procedures_defnoreturn={category:null,helpUrl:Blockly.LANG_PROCEDURES_DEFNORETURN_HELPURL,init:function(){var a=Blockly.Procedures.findLegalName(Blockly.LANG_PROCEDURES_DEFNORETURN_PROCEDURE,this);this.appendTitle(new Blockly.FieldTextInput(a,Blockly.Procedures.rename),"NAME");this.appendTitle("","PARAMS");this.appendInput(Blockly.LANG_PROCEDURES_DEFNORETURN_DO,Blockly.NEXT_STATEMENT,"STACK");this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"]));this.setTooltip(Blockly.LANG_PROCEDURES_DEFNORETURN_TOOLTIP_1);this.arguments_=[]},updateParams_:function(){var a=false;var b={};for(var c=0;c<this.arguments_.length;c++){if(b["arg_"+this.arguments_[c].toLowerCase()]){a=true;break}b["arg_"+this.arguments_[c].toLowerCase()]=true}if(a){this.setWarningText(Blockly.LANG_PROCEDURES_DEF_DUPLICATE_WARNING)}else{this.setWarningText(null)}var d=this.arguments_.join(", ");this.setTitleText(d,"PARAMS")},mutationToDom:function(){var a=document.createElement("mutation");for(var b=0;b<this.arguments_.length;b++){var c=document.createElement("arg");c.setAttribute("name",this.arguments_[b]);a.appendChild(c)}return a},domToMutation:function(a){this.arguments_=[];for(var b=0,c;c=a.childNodes[b];b++){if(c.nodeName=="arg"){this.arguments_.push(c.getAttribute("name"))}}this.updateParams_()},decompose:function(a){var b=new Blockly.Block(a,"procedures_mutatorcontainer");b.initSvg();var c=b.inputList[0];for(var d=0;d<this.arguments_.length;d++){var e=new Blockly.Block(a,"procedures_mutatorarg");e.initSvg();e.setTitleText(this.arguments_[d],"NAME");e.oldLocation=d;c.connect(e.previousConnection);c=e.nextConnection}Blockly.Procedures.mutateCallers(this.getTitleText("NAME"),this.workspace,this.arguments_,null);return b},compose:function(a){this.arguments_=[];paramIds=[];var b=a.getInputTargetBlock("STACK");while(b){this.arguments_.push(b.getTitleText("NAME"));paramIds.push(b.id);b=b.nextConnection&&b.nextConnection.targetBlock()}this.updateParams_();Blockly.Procedures.mutateCallers(this.getTitleText("NAME"),this.workspace,this.arguments_,paramIds)},destroy:function(){var a=this.getTitleText("NAME");var b=true;var c=this.workspace;Blockly.Block.prototype.destroy.call(this);if(true){}},getProcedureDef:function(){return[this.getTitleText("NAME"),this.arguments_,false]},getVars:function(){return this.arguments_},renameVar:function(a,b){var c=false;for(var d=0;d<this.arguments_.length;d++){if(Blockly.Names.equals(a,this.arguments_[d])){this.arguments_[d]=b;c=true}}if(c){this.updateParams_();if(this.mutator.isVisible_()){var e=this.mutator.workspace_.getAllBlocks();for(var d=0,f;f=e[d];d++){if(f.type=="procedures_mutatorarg"&&Blockly.Names.equals(a,f.getTitleText("NAME"))){f.setTitleText(b,"NAME")}}}}}};Blockly.Language.procedures_defreturn={category:null,helpUrl:Blockly.LANG_PROCEDURES_DEFRETURN_HELPURL,init:function(){var a=Blockly.Procedures.findLegalName(Blockly.LANG_PROCEDURES_DEFRETURN_PROCEDURE,this);this.appendTitle(new Blockly.FieldTextInput(a,Blockly.Procedures.rename),"NAME");this.appendInput(["","PARAMS"],Blockly.DUMMY_INPUT);this.appendInput(Blockly.LANG_PROCEDURES_DEFRETURN_DO,Blockly.NEXT_STATEMENT,"STACK");this.appendInput(Blockly.LANG_PROCEDURES_DEFRETURN_RETURN,Blockly.INPUT_VALUE,"RETURN",null);this.setMutator(new Blockly.Mutator(["procedures_mutatorarg"]));this.setTooltip(Blockly.LANG_PROCEDURES_DEFRETURN_TOOLTIP_1);this.arguments_=[]},updateParams_:Blockly.Language.procedures_defnoreturn.updateParams_,mutationToDom:Blockly.Language.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Language.procedures_defnoreturn.domToMutation,decompose:Blockly.Language.procedures_defnoreturn.decompose,compose:Blockly.Language.procedures_defnoreturn.compose,destroy:Blockly.Language.procedures_defnoreturn.destroy,getProcedureDef:function(){return[this.getTitleText("NAME"),this.arguments_,true]},getVars:Blockly.Language.procedures_defnoreturn.getVars,renameVar:Blockly.Language.procedures_defnoreturn.renameVar};Blockly.Language.procedures_mutatorcontainer={init:function(){this.appendTitle(Blockly.LANG_PROCEDURES_MUTATORCONTAINER_TITLE);this.appendInput("",Blockly.NEXT_STATEMENT,"STACK");this.setTooltip("");this.contextMenu=false}};Blockly.Language.procedures_mutatorarg={init:function(){this.appendTitle(Blockly.LANG_PROCEDURES_MUTATORARG_TITLE);this.appendTitle(new Blockly.FieldTextInput("x",Blockly.Language.procedures_mutatorarg.validator),"NAME");this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("");this.contextMenu=false}};Blockly.Language.procedures_mutatorarg.validator=function(a){a=a.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"");return a||null};Blockly.Language.procedures_callnoreturn={category:null,helpUrl:Blockly.LANG_PROCEDURES_CALLNORETURN_HELPURL,init:function(){this.appendTitle(Blockly.LANG_PROCEDURES_CALLNORETURN_CALL);this.appendTitle(Blockly.LANG_PROCEDURES_CALLNORETURN_PROCEDURE,"NAME");this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_PROCEDURES_CALLNORETURN_TOOLTIP_1);this.arguments_=[];this.quarkConnections_=null;this.quarkArguments_=null},getProcedureCall:function(){return this.getTitleText("NAME")},renameProcedure:function(a,b){if(Blockly.Names.equals(a,this.getTitleText("NAME"))){this.setTitleText(b,"NAME")}},setProcedureParameters:function(a,b){if(!b){this.quarkConnections_={};this.quarkArguments_=null;return}if(b.length!=a.length){throw"Error: paramNames and paramIds must be the same length."}if(!this.quarkArguments_){this.quarkConnections_={};if(a.join("\n")==this.arguments_.join("\n")){this.quarkArguments_=b}}for(var c=0;c<this.arguments_.length;c++){var d=this.getInput("ARG"+c).targetConnection;this.quarkConnections_[this.quarkArguments_[c]]=d}for(var c=this.arguments_.length-1;c>=0;c--){this.removeInput("ARG"+c)}this.arguments_=[].concat(a);this.quarkArguments_=b;for(var c=0;c<this.arguments_.length;c++){var e=this.appendInput(this.arguments_[c],Blockly.INPUT_VALUE,"ARG"+c,null);if(this.quarkArguments_){var f=this.quarkArguments_[c];if(f in this.quarkConnections_){var d=this.quarkConnections_[f];if(!d||d.targetConnection||d.sourceBlock_.workspace!=this.workspace){delete this.quarkConnections_[f]}else{e.connect(d)}}}}},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("name",this.getTitleText("NAME"));for(var b=0;b<this.arguments_.length;b++){var c=document.createElement("arg");c.setAttribute("name",this.arguments_[b]);a.appendChild(c)}return a},domToMutation:function(a){var b=a.getAttribute("name");this.setTitleText(b,"NAME");this.arguments_=[];for(var c=0,d;d=a.childNodes[c];c++){if(d.tagName&&d.tagName.toLowerCase()=="arg"){var e=d.getAttribute("name");this.appendInput(e,Blockly.INPUT_VALUE,"ARG"+this.arguments_.length,null);this.arguments_.push(e)}}},renameVar:function(a,b){for(var c=0;c<this.arguments_.length;c++){if(Blockly.Names.equals(a,this.arguments_[c])){this.arguments_[c]=b;this.getInput("ARG"+c).label.setText(b)}}},customContextMenu:function(a){var b={enabled:true};b.text=Blockly.LANG_PROCEDURES_HIGHLIGHT_DEF;var c=this.getTitleText("NAME");var d=this.workspace;b.callback=function(){var a=d.getAllBlocks(false);for(var b=0;b<a.length;b++){var e=a[b].getProcedureDef;if(e){var f=e.call(a[b]);if(f&&Blockly.Names.equals(f[0],c)){a[b].select();break}}}};a.push(b)}};Blockly.Language.procedures_callreturn={category:null,helpUrl:Blockly.LANG_PROCEDURES_CALLRETURN_HELPURL,init:function(){this.appendTitle(Blockly.LANG_PROCEDURES_CALLRETURN_CALL);this.appendTitle(Blockly.LANG_PROCEDURES_CALLRETURN_PROCEDURE,"NAME");this.setOutput(true,null);this.setTooltip(Blockly.LANG_PROCEDURES_CALLRETURN_TOOLTIP_1);this.arguments_=[];this.quarkMap_=null;this.quarkList_=null},getProcedureCall:Blockly.Language.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Language.procedures_callnoreturn.renameProcedure,setProcedureParameters:Blockly.Language.procedures_callnoreturn.setProcedureParameters,mutationToDom:Blockly.Language.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Language.procedures_callnoreturn.domToMutation,renameVar:Blockly.Language.procedures_callnoreturn.renameVar,customContextMenu:Blockly.Language.procedures_callnoreturn.customContextMenu};if(!Blockly.Language)Blockly.Language={};Blockly.Language.math_number={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_NUMBER_HELPURL,init:function(){this.appendTitle(new Blockly.FieldTextInput("0",Blockly.Language.math_number.validator),"NUM");this.setOutput(true,Number);this.setTooltip(Blockly.LANG_MATH_NUMBER_TOOLTIP_1)}};Blockly.Language.math_number.validator=function(a){var b=parseFloat(a||0);return isNaN(b)?null:String(b)};Blockly.Language.math_arithmetic={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_ARITHMETIC_HELPURL,init:function(){this.setOutput(true,Number);this.appendInput("",Blockly.INPUT_VALUE,"A",Number);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendInput([a,"OP"],Blockly.INPUT_VALUE,"B",Number);this.setInputsInline(true);var b=this;this.setTooltip(function(){var a=b.getTitleValue("OP");return Blockly.Language.math_arithmetic.TOOLTIPS[a]})}};Blockly.Language.math_arithmetic.OPERATORS=[["+","ADD"],["-","MINUS"],["×","MULTIPLY"],["÷","DIVIDE"],["^","POWER"]];Blockly.Language.math_arithmetic.TOOLTIPS={ADD:Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_ADD,MINUS:Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_MINUS,MULTIPLY:Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_MULTIPLY,DIVIDE:Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_DIVIDE,POWER:Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_POWER};Blockly.Language.math_change={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_CHANGE_HELPURL,init:function(){this.appendTitle(Blockly.LANG_MATH_CHANGE_TITLE_CHANGE);this.appendTitle(new Blockly.FieldDropdown(Blockly.Variables.dropdownCreate,Blockly.Variables.dropdownChange),"VAR").setText(Blockly.LANG_MATH_CHANGE_TITLE_ITEM);this.appendInput(Blockly.LANG_MATH_CHANGE_INPUT_BY,Blockly.INPUT_VALUE,"DELTA",Number);this.setPreviousStatement(true);this.setNextStatement(true);var a=this;this.setTooltip(function(){return Blockly.LANG_MATH_CHANGE_TOOLTIP_1.replace("%1",a.getTitleText("VAR"))})},getVars:function(){return[this.getTitleText("VAR")]},renameVar:function(a,b){if(Blockly.Names.equals(a,this.getTitleText("VAR"))){this.setTitleText(b,"VAR")}}};Blockly.Language.math_single={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_SINGLE_HELPURL,init:function(){this.setOutput(true,Number);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendInput([a,"OP"],Blockly.INPUT_VALUE,"NUM",Number);var b=this;this.setTooltip(function(){var a=b.getTitleValue("OP");return Blockly.Language.math_single.TOOLTIPS[a]})}};Blockly.Language.math_single.OPERATORS=[[Blockly.LANG_MATH_SINGLE_OP_ROOT,"ROOT"],[Blockly.LANG_MATH_SINGLE_OP_ABSOLUTE,"ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]];Blockly.Language.math_single.TOOLTIPS={ROOT:Blockly.LANG_MATH_SINGLE_TOOLTIP_ROOT,ABS:Blockly.LANG_MATH_SINGLE_TOOLTIP_ABS,NEG:Blockly.LANG_MATH_SINGLE_TOOLTIP_NEG,LN:Blockly.LANG_MATH_SINGLE_TOOLTIP_LN,LOG10:Blockly.LANG_MATH_SINGLE_TOOLTIP_LOG10,EXP:Blockly.LANG_MATH_SINGLE_TOOLTIP_EXP,POW10:Blockly.LANG_MATH_SINGLE_TOOLTIP_POW10};Blockly.Language.math_round={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_ROUND_HELPURL,init:function(){this.setOutput(true,Number);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendInput([a,"OP"],Blockly.INPUT_VALUE,"NUM",Number);this.setTooltip(Blockly.LANG_MATH_ROUND_TOOLTIP_1)}};Blockly.Language.math_round.OPERATORS=[[Blockly.LANG_MATH_ROUND_OPERATOR_ROUND,"ROUND"],[Blockly.LANG_MATH_ROUND_OPERATOR_ROUNDUP,"ROUNDUP"],[Blockly.LANG_MATH_ROUND_OPERATOR_ROUNDDOWN,"ROUNDDOWN"]];Blockly.Language.math_trig={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_TRIG_HELPURL,init:function(){this.setOutput(true,Number);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendInput([a,"OP"],Blockly.INPUT_VALUE,"NUM",Number);var b=this;this.setTooltip(function(){var a=b.getTitleValue("OP");return Blockly.Language.math_trig.TOOLTIPS[a]})}};Blockly.Language.math_trig.OPERATORS=[["sin","SIN"],["cos","COS"],["tan","TAN"],["asin","ASIN"],["acos","ACOS"],["atan","ATAN"]];Blockly.Language.math_trig.TOOLTIPS={SIN:Blockly.LANG_MATH_TRIG_TOOLTIP_SIN,COS:Blockly.LANG_MATH_TRIG_TOOLTIP_COS,TAN:Blockly.LANG_MATH_TRIG_TOOLTIP_TAN,ASIN:Blockly.LANG_MATH_TRIG_TOOLTIP_ASIN,ACOS:Blockly.LANG_MATH_TRIG_TOOLTIP_ACOS,ATAN:Blockly.LANG_MATH_TRIG_TOOLTIP_ATAN};Blockly.Language.math_on_list={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_ONLIST_HELPURL,init:function(){this.setOutput(true,[Number,Array]);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendTitle(a,"OP");this.appendInput(Blockly.LANG_MATH_ONLIST_INPUT_OFLIST,Blockly.INPUT_VALUE,"LIST",Array);var b=this;this.setTooltip(function(){var a=b.getTitleValue("OP");return Blockly.Language.math_on_list.TOOLTIPS[a]})}};Blockly.Language.math_on_list.OPERATORS=[[Blockly.LANG_MATH_ONLIST_OPERATOR_SUM,"SUM"],[Blockly.LANG_MATH_ONLIST_OPERATOR_MIN,"MIN"],[Blockly.LANG_MATH_ONLIST_OPERATOR_MAX,"MAX"],[Blockly.LANG_MATH_ONLIST_OPERATOR_AVERAGE,"AVERAGE"],[Blockly.LANG_MATH_ONLIST_OPERATOR_MEDIAN,"MEDIAN"],[Blockly.LANG_MATH_ONLIST_OPERATOR_MODE,"MODE"],[Blockly.LANG_MATH_ONLIST_OPERATOR_STD_DEV,"STD_DEV"],[Blockly.LANG_MATH_ONLIST_OPERATOR_RANDOM,"RANDOM"]];Blockly.Language.math_on_list.TOOLTIPS={SUM:Blockly.LANG_MATH_ONLIST_TOOLTIP_SUM,MIN:Blockly.LANG_MATH_ONLIST_TOOLTIP_MIN,MAX:Blockly.LANG_MATH_ONLIST_TOOLTIP_MAX,AVERAGE:Blockly.LANG_MATH_ONLIST_TOOLTIP_AVERAGE,MEDIAN:Blockly.LANG_MATH_ONLIST_TOOLTIP_MEDIAN,MODE:Blockly.LANG_MATH_ONLIST_TOOLTIP_MODE,STD_DEV:Blockly.LANG_MATH_ONLIST_TOOLTIP_STD_DEV,RANDOM:Blockly.LANG_MATH_ONLIST_TOOLTIP_RANDOM};Blockly.Language.math_constrain={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_CONSTRAIN_HELPURL,init:function(){this.setOutput(true,Number);this.appendInput(Blockly.LANG_MATH_CONSTRAIN_INPUT_CONSTRAIN,Blockly.INPUT_VALUE,"VALUE",Number);this.appendInput(Blockly.LANG_MATH_CONSTRAIN_INPUT_LOW,Blockly.INPUT_VALUE,"LOW",Number);this.appendInput(Blockly.LANG_MATH_CONSTRAIN_INPUT_HIGH,Blockly.INPUT_VALUE,"HIGH",Number);this.setInputsInline(true);this.setTooltip(Blockly.LANG_MATH_CONSTRAIN_TOOLTIP_1)}};Blockly.Language.math_modulo={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_MODULO_HELPURL,init:function(){this.setOutput(true,Number);this.appendInput(Blockly.LANG_MATH_MODULO_INPUT_DIVIDEND,Blockly.INPUT_VALUE,"DIVIDEND",Number);this.appendInput("÷",Blockly.INPUT_VALUE,"DIVISOR",Number);this.setInputsInline(true);this.setTooltip(Blockly.LANG_MATH_MODULO_TOOLTIP_1)}};Blockly.Language.math_random_int={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_RANDOM_INT_HELPURL,init:function(){this.setOutput(true,Number);this.appendTitle(Blockly.LANG_MATH_RANDOM_INT_TITLE_RANDOM);this.appendInput(Blockly.LANG_MATH_RANDOM_INT_INPUT_FROM,Blockly.INPUT_VALUE,"FROM",Number);this.appendInput(Blockly.LANG_MATH_RANDOM_INT_INPUT_TO,Blockly.INPUT_VALUE,"TO",Number);this.setInputsInline(true);this.setTooltip(Blockly.LANG_MATH_RANDOM_INT_TOOLTIP_1)}};Blockly.Language.math_random_float={category:Blockly.LANG_CATEGORY_MATH,helpUrl:Blockly.LANG_MATH_RANDOM_FLOAT_HELPURL,init:function(){this.setOutput(true,Number);this.appendTitle(Blockly.LANG_MATH_RANDOM_FLOAT_TITLE_RANDOM);this.setTooltip(Blockly.LANG_MATH_RANDOM_FLOAT_TOOLTIP_1)}};if(!Blockly.Language)Blockly.Language={};Blockly.Language.logic_compare={category:Blockly.LANG_CATEGORY_LOGIC,helpUrl:Blockly.LANG_LOGIC_COMPARE_HELPURL,init:function(){this.setOutput(true,Boolean);this.appendInput("",Blockly.INPUT_VALUE,"A",null);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendInput([a,"OP"],Blockly.INPUT_VALUE,"B",null);this.setInputsInline(true);var b=this;this.setTooltip(function(){var a=b.getTitleValue("OP");return Blockly.Language.logic_compare.TOOLTIPS[a]})}};Blockly.Language.logic_compare.OPERATORS=[["=","EQ"],["≠","NEQ"],["<","LT"],["≤","LTE"],[">","GT"],["≥","GTE"]];Blockly.Language.logic_compare.TOOLTIPS={EQ:Blockly.LANG_LOGIC_COMPARE_TOOLTIP_EQ,NEQ:Blockly.LANG_LOGIC_COMPARE_TOOLTIP_NEQ,LT:Blockly.LANG_LOGIC_COMPARE_TOOLTIP_LT,LTE:Blockly.LANG_LOGIC_COMPARE_TOOLTIP_LTE,GT:Blockly.LANG_LOGIC_COMPARE_TOOLTIP_GT,GTE:Blockly.LANG_LOGIC_COMPARE_TOOLTIP_GTE};Blockly.Language.logic_operation={category:Blockly.LANG_CATEGORY_LOGIC,helpUrl:Blockly.LANG_LOGIC_OPERATION_HELPURL,init:function(){this.setOutput(true,Boolean);this.appendInput("",Blockly.INPUT_VALUE,"A",Boolean);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendInput([a,"OP"],Blockly.INPUT_VALUE,"B",Boolean);this.setInputsInline(true);var b=this;this.setTooltip(function(){var a=b.getTitleValue("OP");return Blockly.Language.logic_operation.TOOLTIPS[a]})}};Blockly.Language.logic_operation.OPERATORS=[[Blockly.LANG_LOGIC_OPERATION_AND,"AND"],[Blockly.LANG_LOGIC_OPERATION_OR,"OR"]];Blockly.Language.logic_operation.TOOLTIPS={AND:Blockly.LANG_LOGIC_OPERATION_TOOLTIP_AND,OR:Blockly.LANG_LOGIC_OPERATION_TOOLTIP_OR};Blockly.Language.logic_negate={category:Blockly.LANG_CATEGORY_LOGIC,helpUrl:Blockly.LANG_LOGIC_NEGATE_HELPURL,init:function(){this.setOutput(true,Boolean);this.appendInput(Blockly.LANG_LOGIC_NEGATE_INPUT_NOT,Blockly.INPUT_VALUE,"BOOL",Boolean);this.setTooltip(Blockly.LANG_LOGIC_NEGATE_TOOLTIP_1)}};Blockly.Language.logic_boolean={category:Blockly.LANG_CATEGORY_LOGIC,helpUrl:Blockly.LANG_LOGIC_BOOLEAN_HELPURL,init:function(){this.setOutput(true,Boolean);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendTitle(a,"BOOL");this.setTooltip(Blockly.LANG_LOGIC_BOOLEAN_TOOLTIP_1)}};Blockly.Language.logic_boolean.OPERATORS=[[Blockly.LANG_LOGIC_BOOLEAN_TRUE,"TRUE"],[Blockly.LANG_LOGIC_BOOLEAN_FALSE,"FALSE"]];if(!Blockly.Language)Blockly.Language={};Blockly.Language.lists_create_empty={category:Blockly.LANG_CATEGORY_LISTS,helpUrl:Blockly.LANG_LISTS_CREATE_EMPTY_HELPURL,init:function(){this.setOutput(true,Array);this.appendTitle(Blockly.LANG_LISTS_CREATE_EMPTY_TITLE_1);this.setTooltip(Blockly.LANG_LISTS_CREATE_EMPTY_TOOLTIP_1)}};Blockly.Language.lists_create_with={category:Blockly.LANG_CATEGORY_LISTS,helpUrl:"",init:function(){this.appendTitle(Blockly.LANG_LISTS_CREATE_WITH_INPUT_WITH);this.appendInput("",Blockly.INPUT_VALUE,"ADD0",null);this.appendInput("",Blockly.INPUT_VALUE,"ADD1",null);this.appendInput("",Blockly.INPUT_VALUE,"ADD2",null);this.setOutput(true,Array);this.setMutator(new Blockly.Mutator(["lists_create_with_item"]));this.setTooltip(Blockly.LANG_LISTS_CREATE_WITH_TOOLTIP_1);this.itemCount_=3},mutationToDom:function(a){var b=document.createElement("mutation");b.setAttribute("items",this.itemCount_);return b},domToMutation:function(a){for(var b=0;b<this.itemCount_;b++){this.removeInput("ADD"+b)}this.itemCount_=parseInt(a.getAttribute("items"),10);for(var b=0;b<this.itemCount_;b++){this.appendInput("",Blockly.INPUT_VALUE,"ADD"+b,null)}},decompose:function(a){var b=new Blockly.Block(a,"lists_create_with_container");b.initSvg();var c=b.inputList[0];for(var d=0;d<this.itemCount_;d++){var e=new Blockly.Block(a,"lists_create_with_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){for(var b=this.itemCount_-1;b>=0;b--){this.removeInput("ADD"+b)}this.itemCount_=0;var c=a.getInputTargetBlock("STACK");while(c){var d=this.appendInput("",Blockly.INPUT_VALUE,"ADD"+this.itemCount_,null);if(c.valueInput_){d.connect(c.valueInput_)}this.itemCount_++;c=c.nextConnection&&c.nextConnection.targetBlock()}},saveConnections:function(a){var b=a.getInputTargetBlock("STACK");var c=0;while(b){var d=this.getInput("ADD"+c);b.valueInput_=d&&d.targetConnection;c++;b=b.nextConnection&&b.nextConnection.targetBlock()}}};Blockly.Language.lists_create_with_container={init:function(){this.appendTitle(Blockly.LANG_LISTS_CREATE_WITH_CONTAINER_TITLE_ADD);this.appendInput("",Blockly.NEXT_STATEMENT,"STACK");this.setTooltip(Blockly.LANG_LISTS_CREATE_WITH_CONTAINER_TOOLTIP_1);this.contextMenu=false}};Blockly.Language.lists_create_with_item={init:function(){this.appendTitle(Blockly.LANG_LISTS_CREATE_WITH_ITEM_TITLE);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_LISTS_CREATE_WITH_ITEM_TOOLTIP_1);this.contextMenu=false}};Blockly.Language.lists_repeat={category:Blockly.LANG_CATEGORY_LISTS,helpUrl:Blockly.LANG_LISTS_REPEAT_HELPURL,init:function(){this.setOutput(true,Array);this.appendTitle(Blockly.LANG_LISTS_REPEAT_TITLE_CREATELIST);this.appendInput(Blockly.LANG_LISTS_REPEAT_INPUT_WITH,Blockly.INPUT_VALUE,"ITEM",null);this.appendInput(Blockly.LANG_LISTS_REPEAT_INPIT_REPEATED,Blockly.INPUT_VALUE,"NUM",Number);this.appendInput(Blockly.LANG_LISTS_REPEAT_INPIT_TIMES,Blockly.DUMMY_INPUT,"",null);this.setInputsInline(true);this.setTooltip(Blockly.LANG_LISTS_REPEAT_TOOLTIP_1)}};Blockly.Language.lists_length={category:Blockly.LANG_CATEGORY_LISTS,helpUrl:Blockly.LANG_LISTS_LENGTH_HELPURL,init:function(){this.appendInput(Blockly.LANG_LISTS_LENGTH_INPUT_LENGTH,Blockly.INPUT_VALUE,"VALUE",[Array,String]);this.setOutput(true,Number);this.setTooltip(Blockly.LANG_LISTS_LENGTH_TOOLTIP_1)}};Blockly.Language.lists_isEmpty={category:Blockly.LANG_CATEGORY_LISTS,helpUrl:Blockly.LANG_LISTS_IS_EMPTY_HELPURL,init:function(){this.appendInput(Blockly.LANG_LISTS_INPUT_IS_EMPTY,Blockly.INPUT_VALUE,"VALUE",[Array,String]);this.setOutput(true,Boolean);this.setTooltip(Blockly.LANG_LISTS_TOOLTIP_1)}};Blockly.Language.lists_indexOf={category:Blockly.LANG_CATEGORY_LISTS,helpUrl:Blockly.LANG_LISTS_INDEX_OF_HELPURL,init:function(){this.setOutput(true,Number);this.appendTitle(Blockly.LANG_LISTS_INDEX_OF_TITLE_FIND);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendTitle(a,"END");this.appendInput(Blockly.LANG_LISTS_INDEX_OF_INPUT_OCCURRENCE,Blockly.INPUT_VALUE,"FIND",null);this.appendInput(Blockly.LANG_LISTS_INDEX_OF_INPUT_IN_LIST,Blockly.INPUT_VALUE,"VALUE",Array);this.setInputsInline(true);this.setTooltip(Blockly.LANG_LISTS_INDEX_OF_TOOLTIP_1)}};Blockly.Language.lists_indexOf.OPERATORS=[[Blockly.LANG_LISTS_INDEX_OF_FIRST,"FIRST"],[Blockly.LANG_LISTS_INDEX_OF_LAST,"LAST"]];Blockly.Language.lists_getIndex={category:Blockly.LANG_CATEGORY_LISTS,helpUrl:Blockly.LANG_LISTS_GET_INDEX_HELPURL,init:function(){this.setOutput(true,null);this.appendTitle(Blockly.LANG_LISTS_GET_INDEX_TITLE);this.appendInput(Blockly.LANG_LISTS_GET_INDEX_INPUT_AT,Blockly.INPUT_VALUE,"AT",Number);this.appendInput(Blockly.LANG_LISTS_GET_INDEX_INPUT_IN_LIST,Blockly.INPUT_VALUE,"VALUE",Array);this.setInputsInline(true);this.setTooltip(Blockly.LANG_LISTS_GET_INDEX_TOOLTIP_1)}};Blockly.Language.lists_setIndex={category:Blockly.LANG_CATEGORY_LISTS,helpUrl:Blockly.LANG_LISTS_SET_INDEX_HELPURL,init:function(){this.appendTitle(Blockly.LANG_LISTS_SET_INDEX_TITLE);this.appendInput(Blockly.LANG_LISTS_SET_INDEX_INPUT_AT,Blockly.INPUT_VALUE,"AT",Number);this.appendInput(Blockly.LANG_LISTS_SET_INDEX_INPUT_IN_LIST,Blockly.INPUT_VALUE,"LIST",Array);this.appendInput(Blockly.LANG_LISTS_SET_INDEX_INPUT_TO,Blockly.INPUT_VALUE,"TO",null);this.setInputsInline(true);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_LISTS_SET_INDEX_TOOLTIP_1)}};if(!Blockly.Language)Blockly.Language={};Blockly.Language.controls_if={category:Blockly.LANG_CATEGORY_CONTROLS,helpUrl:Blockly.LANG_CONTROLS_IF_HELPURL,init:function(){this.appendInput(this.MSG_IF,Blockly.INPUT_VALUE,"IF0",Boolean);this.appendInput(this.MSG_THEN,Blockly.NEXT_STATEMENT,"DO0");this.setPreviousStatement(true);this.setNextStatement(true);this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));var a=this;this.setTooltip(function(){if(!a.elseifCount_&&!a.elseCount_){return Blockly.LANG_CONTROLS_IF_TOOLTIP_1}else if(!a.elseifCount_&&a.elseCount_){return Blockly.LANG_CONTROLS_IF_TOOLTIP_2}else if(a.elseifCount_&&!a.elseCount_){return Blockly.LANG_CONTROLS_IF_TOOLTIP_3}else if(a.elseifCount_&&a.elseCount_){return Blockly.LANG_CONTROLS_IF_TOOLTIP_4}return""});this.elseifCount_=0;this.elseCount_=0},MSG_IF:Blockly.LANG_CONTROLS_IF_MSG_IF,MSG_ELSEIF:Blockly.LANG_CONTROLS_IF_MSG_ELSEIF,MSG_ELSE:Blockly.LANG_CONTROLS_IF_MSG_ELSE,MSG_THEN:Blockly.LANG_CONTROLS_IF_MSG_THEN,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_){return null}var a=document.createElement("mutation");if(this.elseifCount_){a.setAttribute("elseif",this.elseifCount_)}if(this.elseCount_){a.setAttribute("else",1)}return a},domToMutation:function(a){this.elseifCount_=parseInt(a.getAttribute("elseif"),10);this.elseCount_=parseInt(a.getAttribute("else"),10);for(var b=1;b<=this.elseifCount_;b++){this.appendInput(this.MSG_ELSEIF,Blockly.INPUT_VALUE,"IF"+b,Boolean);this.appendInput(this.MSG_THEN,Blockly.NEXT_STATEMENT,"DO"+b)}if(this.elseCount_){this.appendInput(this.MSG_ELSE,Blockly.NEXT_STATEMENT,"ELSE")}},decompose:function(a){var b=new Blockly.Block(a,"controls_if_if");b.initSvg();var c=b.inputList[0];for(var d=1;d<=this.elseifCount_;d++){var e=new Blockly.Block(a,"controls_if_elseif");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}if(this.elseCount_){var f=new Blockly.Block(a,"controls_if_else");f.initSvg();c.connect(f.previousConnection)}return b},compose:function(a){if(this.elseCount_){this.removeInput("ELSE")}this.elseCount_=0;for(var b=this.elseifCount_;b>0;b--){this.removeInput("IF"+b);this.removeInput("DO"+b)}this.elseifCount_=0;var c=a.getInputTargetBlock("STACK");while(c){switch(c.type){case"controls_if_elseif":this.elseifCount_++;var d=this.appendInput(this.MSG_ELSEIF,Blockly.INPUT_VALUE,"IF"+this.elseifCount_,Boolean);var e=this.appendInput(this.MSG_THEN,Blockly.NEXT_STATEMENT,"DO"+this.elseifCount_);if(c.valueInput_){d.connect(c.valueInput_)}if(c.statementInput_){e.connect(c.statementInput_)}break;case"controls_if_else":this.elseCount_++;var f=this.appendInput(this.MSG_ELSE,Blockly.NEXT_STATEMENT,"ELSE");if(c.statementInput_){f.connect(c.statementInput_)}break;default:throw"Unknown block type."}c=c.nextConnection&&c.nextConnection.targetBlock()}},saveConnections:function(a){var b=a.getInputTargetBlock("STACK");var c=1;while(b){switch(b.type){case"controls_if_elseif":var d=this.getInput("IF"+c);var e=this.getInput("DO"+c);b.valueInput_=d&&d.targetConnection;b.statementInput_=e&&e.targetConnection;c++;break;case"controls_if_else":var e=this.getInput("ELSE");b.statementInput_=e&&e.targetConnection;break;default:throw"Unknown block type."}b=b.nextConnection&&b.nextConnection.targetBlock()}}};Blockly.Language.controls_if_if={init:function(){this.appendTitle(Blockly.LANG_CONTROLS_IF_IF_TITLE_IF);this.appendInput("",Blockly.NEXT_STATEMENT,"STACK");this.setTooltip(Blockly.LANG_CONTROLS_IF_IF_TOOLTIP_1);this.contextMenu=false}};Blockly.Language.controls_if_elseif={init:function(){this.appendTitle(Blockly.LANG_CONTROLS_IF_ELSEIF_TITLE_ELSEIF);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_CONTROLS_IF_ELSEIF_TOOLTIP_1);this.contextMenu=false}};Blockly.Language.controls_if_else={init:function(){this.appendTitle(Blockly.LANG_CONTROLS_IF_ELSE_TITLE_ELSE);this.setPreviousStatement(true);this.setTooltip(Blockly.LANG_CONTROLS_IF_ELSE_TOOLTIP_1);this.contextMenu=false}};Blockly.Language.controls_whileUntil={category:Blockly.LANG_CATEGORY_CONTROLS,helpUrl:Blockly.LANG_CONTROLS_WHILEUNTIL_HELPURL,init:function(){this.appendTitle(Blockly.LANG_CONTROLS_WHILEUNTIL_TITLE_REPEAT);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendTitle(a,"MODE");this.appendInput("",Blockly.INPUT_VALUE,"BOOL",Boolean);this.appendInput(Blockly.LANG_CONTROLS_WHILEUNTIL_INPUT_DO,Blockly.NEXT_STATEMENT,"DO");this.setPreviousStatement(true);this.setNextStatement(true);var b=this;this.setTooltip(function(){var a=b.getTitleValue("MODE");return Blockly.Language.controls_whileUntil.TOOLTIPS[a]})}};Blockly.Language.controls_whileUntil.OPERATORS=[[Blockly.LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE,"WHILE"],[Blockly.LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL,"UNTIL"]];Blockly.Language.controls_whileUntil.TOOLTIPS={WHILE:Blockly.LANG_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE,UNTIL:Blockly.LANG_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL};Blockly.Language.controls_for={category:Blockly.LANG_CATEGORY_CONTROLS,helpUrl:Blockly.LANG_CONTROLS_FOR_HELPURL,init:function(){this.appendTitle(Blockly.LANG_CONTROLS_FOR_TITLE_COUNT);this.appendInput(Blockly.LANG_CONTROLS_FOR_INPUT_WITH,Blockly.LOCAL_VARIABLE,"VAR").setText(Blockly.LANG_CONTROLS_FOR_INPUT_VAR);this.appendInput(Blockly.LANG_CONTROLS_FOR_INPUT_FROM,Blockly.INPUT_VALUE,"FROM",Number);this.appendInput(Blockly.LANG_CONTROLS_FOR_INPUT_TO,Blockly.INPUT_VALUE,"TO",Number);this.appendInput(Blockly.LANG_CONTROLS_FOR_INPUT_DO,Blockly.NEXT_STATEMENT,"DO");this.setPreviousStatement(true);this.setNextStatement(true);this.setInputsInline(true);var a=this;this.setTooltip(function(){return Blockly.LANG_CONTROLS_FOR_TOOLTIP_1.replace("%1",a.getInputVariable("VAR"))})},getVars:function(){return[this.getInputVariable("VAR")]},renameVar:function(a,b){if(Blockly.Names.equals(a,this.getInputVariable("VAR"))){this.setInputVariable("VAR",b)}}};Blockly.Language.controls_forEach={category:Blockly.LANG_CATEGORY_CONTROLS,helpUrl:Blockly.LANG_CONTROLS_FOREACH_HELPURL,init:function(){this.appendTitle(Blockly.LANG_CONTROLS_FOREACH_TITLE_FOREACH);this.appendInput(Blockly.LANG_CONTROLS_FOREACH_INPUT_ITEM,Blockly.LOCAL_VARIABLE,"VAR").setText(Blockly.LANG_CONTROLS_FOREACH_INPUT_VAR);this.appendInput(Blockly.LANG_CONTROLS_FOREACH_INPUT_INLIST,Blockly.INPUT_VALUE,"LIST",Array);this.appendInput(Blockly.LANG_CONTROLS_FOREACH_INPUT_DO,Blockly.NEXT_STATEMENT,"DO");this.setPreviousStatement(true);this.setNextStatement(true);var a=this;this.setTooltip(function(){return Blockly.LANG_CONTROLS_FOREACH_TOOLTIP_1.replace("%1",a.getInputVariable("VAR"))})},getVars:function(){return[this.getInputVariable("VAR")]},renameVar:function(a,b){if(Blockly.Names.equals(a,this.getInputVariable("VAR"))){this.setInputVariable("VAR",b)}}};Blockly.Language.controls_flow_statements={category:Blockly.LANG_CATEGORY_CONTROLS,helpUrl:Blockly.LANG_CONTROLS_FLOW_STATEMENTS_HELPURL,init:function(){var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendTitle(a,"FLOW");this.appendTitle(Blockly.LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP);this.setPreviousStatement(true);var b=this;this.setTooltip(function(){var a=b.getTitleValue("FLOW");return Blockly.Language.controls_flow_statements.TOOLTIPS[a]})},onchange:function(){if(!this.workspace){return}var a=false;var b=this;do{if(b.type=="controls_forEach"||b.type=="controls_for"||b.type=="controls_whileUntil"){a=true;break}b=b.getSurroundParent()}while(b);if(a){this.setWarningText(null)}else{this.setWarningText(Blockly.LANG_CONTROLS_FLOW_STATEMENTS_WARNING)}}};Blockly.Language.controls_flow_statements.OPERATORS=[[Blockly.LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK,"BREAK"],[Blockly.LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE,"CONTINUE"]];Blockly.Language.controls_flow_statements.TOOLTIPS={BREAK:Blockly.LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK,CONTINUE:Blockly.LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE};Blockly.MSG_DUPLICATE_BLOCK="Duplicate";Blockly.MSG_REMOVE_COMMENT="Remove Comment";Blockly.MSG_ADD_COMMENT="Add Comment";Blockly.MSG_EXTERNAL_INPUTS="External Inputs";Blockly.MSG_INLINE_INPUTS="Inline Inputs";Blockly.MSG_DELETE_BLOCK="Delete Block";Blockly.MSG_DELETE_X_BLOCKS="Delete %1 Blocks";Blockly.MSG_COLLAPSE_BLOCK="Collapse Block";Blockly.MSG_EXPAND_BLOCK="Expand Block";Blockly.MSG_DISABLE_BLOCK="Disable Block";Blockly.MSG_ENABLE_BLOCK="Enable Block";Blockly.MSG_HELP="Help";Blockly.MSG_CHANGE_VALUE_TITLE="Change value:";Blockly.MSG_NEW_VARIABLE="New variable...";Blockly.MSG_NEW_VARIABLE_TITLE="New variable name:";Blockly.MSG_RENAME_VARIABLE="Rename variable...";Blockly.MSG_RENAME_VARIABLE_TITLE='Rename all "%1" variables to:';Blockly.MSG_VARIABLE_CATEGORY="Variables";Blockly.MSG_PROCEDURE_CATEGORY="Procedures";Blockly.LANG_CATEGORY_CONTROLS="Control";Blockly.LANG_CONTROLS_IF_HELPURL="http://code.google.com/p/blockly/wiki/If_Then";Blockly.LANG_CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.";Blockly.LANG_CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements.\n"+"Otherwise, do the second block of statements.";Blockly.LANG_CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements.\n"+"Otherwise, if the second value is true, do the second block of statements.";Blockly.LANG_CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements.\n"+"Otherwise, if the second value is true, do the second block of statements.\n"+"If none of the values are true, do the last block of statements.";Blockly.LANG_CONTROLS_IF_MSG_IF="if";Blockly.LANG_CONTROLS_IF_MSG_ELSEIF="else if";Blockly.LANG_CONTROLS_IF_MSG_ELSE="else";Blockly.LANG_CONTROLS_IF_MSG_THEN="then";Blockly.LANG_CONTROLS_IF_IF_TITLE_IF="if";Blockly.LANG_CONTROLS_IF_IF_TOOLTIP_1="Add, remove, or reorder sections\n"+"to reconfigure this if block.";Blockly.LANG_CONTROLS_IF_ELSEIF_TITLE_ELSEIF="else if";Blockly.LANG_CONTROLS_IF_ELSEIF_TOOLTIP_1="Add a condition to the if block.";Blockly.LANG_CONTROLS_IF_ELSE_TITLE_ELSE="else";Blockly.LANG_CONTROLS_IF_ELSE_TOOLTIP_1="Add a final, catch-all condition to the if block.";Blockly.LANG_CONTROLS_WHILEUNTIL_HELPURL="http://code.google.com/p/blockly/wiki/Repeat";Blockly.LANG_CONTROLS_WHILEUNTIL_TITLE_REPEAT="repeat";Blockly.LANG_CONTROLS_WHILEUNTIL_INPUT_DO="do";Blockly.LANG_CONTROLS_WHILEUNTIL_OPERATOR_WHILE="while";Blockly.LANG_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="until";Blockly.LANG_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.";Blockly.LANG_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.";Blockly.LANG_CONTROLS_FOR_HELPURL="http://en.wikipedia.org/wiki/For_loop";Blockly.LANG_CONTROLS_FOR_TITLE_COUNT="count";Blockly.LANG_CONTROLS_FOR_INPUT_WITH="with";Blockly.LANG_CONTROLS_FOR_INPUT_VAR="x";Blockly.LANG_CONTROLS_FOR_INPUT_FROM="from";Blockly.LANG_CONTROLS_FOR_INPUT_TO="to";Blockly.LANG_CONTROLS_FOR_INPUT_DO="do";Blockly.LANG_CONTROLS_FOR_TOOLTIP_1="Count from a start number to an end number.\n"+"For each count, set the current count number to\n"+'variable "%1", and then do some statements.';Blockly.LANG_CONTROLS_FOREACH_HELPURL="http://en.wikipedia.org/wiki/For_loop";Blockly.LANG_CONTROLS_FOREACH_TITLE_FOREACH="for each";Blockly.LANG_CONTROLS_FOREACH_INPUT_ITEM="item";Blockly.LANG_CONTROLS_FOREACH_INPUT_VAR="x";Blockly.LANG_CONTROLS_FOREACH_INPUT_INLIST="in list";Blockly.LANG_CONTROLS_FOREACH_INPUT_DO="do";Blockly.LANG_CONTROLS_FOREACH_TOOLTIP_1="For each item in a list, set the item to\n"+'variable "%1", and then do some statements.';Blockly.LANG_CONTROLS_FLOW_STATEMENTS_HELPURL="http://en.wikipedia.org/wiki/Control_flow";Blockly.LANG_CONTROLS_FLOW_STATEMENTS_INPUT_OFLOOP="of loop";Blockly.LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out";Blockly.LANG_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration";Blockly.LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.";Blockly.LANG_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and\n"+"continue with the next iteration.";Blockly.LANG_CONTROLS_FLOW_STATEMENTS_WARNING="Warning:\n"+"This block may only\n"+"be used within a loop.";Blockly.LANG_CATEGORY_LOGIC="Logic";Blockly.LANG_LOGIC_COMPARE_HELPURL="http://en.wikipedia.org/wiki/Inequality_(mathematics)";Blockly.LANG_LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.";Blockly.LANG_LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.";Blockly.LANG_LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller\n"+"than the second input.";Blockly.LANG_LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller\n"+"than or equal to the second input.";Blockly.LANG_LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater\n"+"than the second input.";Blockly.LANG_LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater\n"+"than or equal to the second input.";Blockly.LANG_LOGIC_OPERATION_HELPURL="http://code.google.com/p/blockly/wiki/And_Or";Blockly.LANG_LOGIC_OPERATION_AND="and";Blockly.LANG_LOGIC_OPERATION_OR="or";Blockly.LANG_LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.";Blockly.LANG_LOGIC_OPERATION_TOOLTIP_OR="Return true if either inputs are true.";Blockly.LANG_LOGIC_NEGATE_HELPURL="http://code.google.com/p/blockly/wiki/Not";Blockly.LANG_LOGIC_NEGATE_INPUT_NOT="not";Blockly.LANG_LOGIC_NEGATE_TOOLTIP_1="Returns true if the input is false.\n"+"Returns false if the input is true.";Blockly.LANG_LOGIC_BOOLEAN_HELPURL="http://code.google.com/p/blockly/wiki/True_False";Blockly.LANG_LOGIC_BOOLEAN_TRUE="true";Blockly.LANG_LOGIC_BOOLEAN_FALSE="false";Blockly.LANG_LOGIC_BOOLEAN_TOOLTIP_1="Returns either true or false.";Blockly.LANG_CATEGORY_MATH="Math";Blockly.LANG_MATH_NUMBER_HELPURL="http://en.wikipedia.org/wiki/Number";Blockly.LANG_MATH_NUMBER_TOOLTIP_1="A number.";Blockly.LANG_MATH_ARITHMETIC_HELPURL="http://en.wikipedia.org/wiki/Arithmetic";Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.";Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.";Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.";Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.";Blockly.LANG_MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to\n"+"the power of the second number.";Blockly.LANG_MATH_CHANGE_HELPURL="http://en.wikipedia.org/wiki/Negation";Blockly.LANG_MATH_CHANGE_TITLE_CHANGE="change";Blockly.LANG_MATH_CHANGE_TITLE_ITEM="item";Blockly.LANG_MATH_CHANGE_INPUT_BY="by";Blockly.LANG_MATH_CHANGE_TOOLTIP_1='Add a number to variable "%1".';Blockly.LANG_MATH_SINGLE_HELPURL="http://en.wikipedia.org/wiki/Square_root";Blockly.LANG_MATH_SINGLE_OP_ROOT="square root";Blockly.LANG_MATH_SINGLE_OP_ABSOLUTE="absolute";Blockly.LANG_MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.";Blockly.LANG_MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.";Blockly.LANG_MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.";Blockly.LANG_MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.";Blockly.LANG_MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.";Blockly.LANG_MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.";Blockly.LANG_MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.";Blockly.LANG_MATH_ROUND_HELPURL="http://en.wikipedia.org/wiki/Rounding";Blockly.LANG_MATH_ROUND_TOOLTIP_1="Round a number up or down.";Blockly.LANG_MATH_ROUND_OPERATOR_ROUND="round";Blockly.LANG_MATH_ROUND_OPERATOR_ROUNDUP="round up";Blockly.LANG_MATH_ROUND_OPERATOR_ROUNDDOWN="round down";Blockly.LANG_MATH_TRIG_HELPURL="http://en.wikipedia.org/wiki/Trigonometric_functions";Blockly.LANG_MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree.";Blockly.LANG_MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree.";Blockly.LANG_MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree.";Blockly.LANG_MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.";Blockly.LANG_MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.";Blockly.LANG_MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.";Blockly.LANG_MATH_ONLIST_HELPURL="";Blockly.LANG_MATH_ONLIST_INPUT_OFLIST="of list";Blockly.LANG_MATH_ONLIST_OPERATOR_SUM="sum";Blockly.LANG_MATH_ONLIST_OPERATOR_MIN="min";Blockly.LANG_MATH_ONLIST_OPERATOR_MAX="max";Blockly.LANG_MATH_ONLIST_OPERATOR_AVERAGE="average";Blockly.LANG_MATH_ONLIST_OPERATOR_MEDIAN="median";Blockly.LANG_MATH_ONLIST_OPERATOR_MODE="modes";Blockly.LANG_MATH_ONLIST_OPERATOR_STD_DEV="standard deviation";Blockly.LANG_MATH_ONLIST_OPERATOR_RANDOM="random item";Blockly.LANG_MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.";Blockly.LANG_MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.";Blockly.LANG_MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.";Blockly.LANG_MATH_ONLIST_TOOLTIP_AVERAGE="Return the arithmetic mean of the list.";Blockly.LANG_MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.";Blockly.LANG_MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.";Blockly.LANG_MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.";Blockly.LANG_MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.";Blockly.LANG_MATH_CONSTRAIN_HELPURL="http://en.wikipedia.org/wiki/Clamping_%28graphics%29";Blockly.LANG_MATH_CONSTRAIN_INPUT_CONSTRAIN="constrain";Blockly.LANG_MATH_CONSTRAIN_INPUT_LOW="between (low)";Blockly.LANG_MATH_CONSTRAIN_INPUT_HIGH="and (high)";Blockly.LANG_MATH_CONSTRAIN_TOOLTIP_1="Constrain a number to be between the specified limits (inclusive).";Blockly.LANG_MATH_MODULO_HELPURL="http://en.wikipedia.org/wiki/Modulo_operation";Blockly.LANG_MATH_MODULO_INPUT_DIVIDEND="remainder of";Blockly.LANG_MATH_MODULO_TOOLTIP_1="Return the remainder of dividing both numbers.";Blockly.LANG_MATH_RANDOM_INT_HELPURL="http://en.wikipedia.org/wiki/Random_number_generation";Blockly.LANG_MATH_RANDOM_INT_TITLE_RANDOM="random integer";Blockly.LANG_MATH_RANDOM_INT_INPUT_FROM="from";Blockly.LANG_MATH_RANDOM_INT_INPUT_TO="to";Blockly.LANG_MATH_RANDOM_INT_TOOLTIP_1="Return a random integer between the two\n"+"specified limits, inclusive.";Blockly.LANG_MATH_RANDOM_FLOAT_HELPURL="http://en.wikipedia.org/wiki/Random_number_generation";Blockly.LANG_MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction";Blockly.LANG_MATH_RANDOM_FLOAT_TOOLTIP_1="Return a random fraction between\n"+"0.0 (inclusive) and 1.0 (exclusive).";Blockly.LANG_CATEGORY_TEXT="Text";Blockly.LANG_TEXT_TEXT_HELPURL="http://en.wikipedia.org/wiki/String_(computer_science)";Blockly.LANG_TEXT_TEXT_TOOLTIP_1="A letter, word, or line of text.";Blockly.LANG_TEXT_JOIN_HELPURL="";Blockly.LANG_TEXT_JOIN_TITLE_CREATEWITH="create text with";Blockly.LANG_TEXT_JOIN_TOOLTIP_1="Create a piece of text by joining\n"+"together any number of items.";Blockly.LANG_TEXT_CREATE_JOIN_TITLE_JOIN="join";Blockly.LANG_TEXT_CREATE_JOIN_TOOLTIP_1="Add, remove, or reorder sections to reconfigure this text block.";Blockly.LANG_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM="item";Blockly.LANG_TEXT_CREATE_JOIN_ITEM_TOOLTIP_1="Add an item to the text.";Blockly.LANG_TEXT_LENGTH_HELPURL="http://www.liv.ac.uk/HPC/HTMLF90Course/HTMLF90CourseNotesnode91.html";Blockly.LANG_TEXT_LENGTH_INPUT_LENGTH="length";Blockly.LANG_TEXT_LENGTH_TOOLTIP_1="Returns number of letters (including spaces)\n"+"in the provided text.";Blockly.LANG_TEXT_ISEMPTY_HELPURL="http://www.liv.ac.uk/HPC/HTMLF90Course/HTMLF90CourseNotesnode91.html";Blockly.LANG_TEXT_ISEMPTY_INPUT_ISEMPTY="is empty";Blockly.LANG_TEXT_ISEMPTY_TOOLTIP_1="Returns true if the provided text is empty.";Blockly.LANG_TEXT_ENDSTRING_HELPURL="http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Farsubex.htm";Blockly.LANG_TEXT_ENDSTRING_INPUT="letters in text";Blockly.LANG_TEXT_ENDSTRING_TOOLTIP_1="Returns specified number of letters at the beginning or end of the text.";Blockly.LANG_TEXT_ENDSTRING_OPERATOR_FIRST="first";Blockly.LANG_TEXT_ENDSTRING_OPERATOR_LAST="last";Blockly.LANG_TEXT_INDEXOF_HELPURL="http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Farsubex.htm";Blockly.LANG_TEXT_INDEXOF_TITLE_FIND="find";Blockly.LANG_TEXT_INDEXOF_INPUT_OCCURRENCE="occurrence of text";Blockly.LANG_TEXT_INDEXOF_INPUT_INTEXT="in text";Blockly.LANG_TEXT_INDEXOF_TOOLTIP_1="Returns the index of the first/last occurrence\n"+"of first text in the second text.\n"+"Returns 0 if text is not found.";Blockly.LANG_TEXT_INDEXOF_OPERATOR_FIRST="first";Blockly.LANG_TEXT_INDEXOF_OPERATOR_LAST="last";Blockly.LANG_TEXT_CHARAT_HELPURL="http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Farsubex.htm";Blockly.LANG_TEXT_CHARAT_TITLE_LETTER="letter";Blockly.LANG_TEXT_CHARAT_INPUT_AT="at";Blockly.LANG_TEXT_CHARAT_INPUT_INTEXT="in text";Blockly.LANG_TEXT_CHARAT_TOOLTIP_1="Returns the letter at the specified position.";Blockly.LANG_TEXT_CHANGECASE_HELPURL="http://www.liv.ac.uk/HPC/HTMLF90Course/HTMLF90CourseNotesnode91.html";Blockly.LANG_TEXT_CHANGECASE_TITLE_TO="to";Blockly.LANG_TEXT_CHANGECASE_TOOLTIP_1="Return a copy of the text in a different case.";Blockly.LANG_TEXT_CHANGECASE_OPERATOR_UPPERCASE="UPPER CASE";Blockly.LANG_TEXT_CHANGECASE_OPERATOR_LOWERCASE="lower case";Blockly.LANG_TEXT_CHANGECASE_OPERATOR_TITLECASE="Title Case";Blockly.LANG_TEXT_TRIM_HELPURL="http://www.liv.ac.uk/HPC/HTMLF90Course/HTMLF90CourseNotesnode91.html";Blockly.LANG_TEXT_TRIM_TITLE_SPACE="trim spaces from";Blockly.LANG_TEXT_TRIM_TITLE_SIDES="sides";Blockly.LANG_TEXT_TRIM_TOOLTIP_1="Return a copy of the text with spaces\n"+"removed from one or both ends.";Blockly.LANG_TEXT_TRIM_TITLE_SIDES="sides";Blockly.LANG_TEXT_TRIM_TITLE_SIDE="side";Blockly.LANG_TEXT_TRIM_OPERATOR_BOTH="both";Blockly.LANG_TEXT_TRIM_OPERATOR_LEFT="left";Blockly.LANG_TEXT_TRIM_OPERATOR_RIGHT="right";Blockly.LANG_TEXT_PRINT_HELPURL="http://www.liv.ac.uk/HPC/HTMLF90Course/HTMLF90CourseNotesnode91.html";Blockly.LANG_TEXT_PRINT_TITLE_PRINT="print";Blockly.LANG_TEXT_PRINT_TOOLTIP_1="Print the specified text, number or other value.";Blockly.LANG_TEXT_PROMPT_HELPURL="http://www.liv.ac.uk/HPC/HTMLF90Course/HTMLF90CourseNotesnode92.html";Blockly.LANG_TEXT_PROMPT_TITLE_PROMPT_FOR="prompt for";Blockly.LANG_TEXT_PROMPT_TITILE_WITH_MESSAGE="with message";Blockly.LANG_TEXT_PROMPT_TOOLTIP_1="Prompt for user input with the specified text.";Blockly.LANG_TEXT_PROMPT_TYPE_TEXT="text";Blockly.LANG_TEXT_PROMPT_TYPE_NUMBER="number";Blockly.LANG_CATEGORY_LISTS="Lists";Blockly.LANG_LISTS_CREATE_EMPTY_HELPURL="http://en.wikipedia.org/wiki/Linked_list#Empty_lists";Blockly.LANG_LISTS_CREATE_EMPTY_TITLE_1="create empty list";Blockly.LANG_LISTS_CREATE_EMPTY_TOOLTIP_1="Returns a list, of length 0, containing no data records";Blockly.LANG_LISTS_CREATE_WITH_INPUT_WITH="create list with";Blockly.LANG_LISTS_CREATE_WITH_TOOLTIP_1="Create a list with any number of items.";Blockly.LANG_LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list";Blockly.LANG_LISTS_CREATE_WITH_CONTAINER_TOOLTIP_1="Add, remove, or reorder sections to reconfigure this list block.";Blockly.LANG_LISTS_CREATE_WITH_ITEM_TITLE="item";Blockly.LANG_LISTS_CREATE_WITH_ITEM_TOOLTIP_1="Add an item to the list.";Blockly.LANG_LISTS_REPEAT_HELPURL="http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Farsubex.htm";Blockly.LANG_LISTS_REPEAT_TITLE_CREATELIST="create list";Blockly.LANG_LISTS_REPEAT_INPUT_WITH="with item";Blockly.LANG_LISTS_REPEAT_INPIT_REPEATED="repeated";Blockly.LANG_LISTS_REPEAT_INPIT_TIMES="times";Blockly.LANG_LISTS_REPEAT_TOOLTIP_1="Creates a list consisting of the given value\n"+"repeated the specified number of times.";Blockly.LANG_LISTS_LENGTH_HELPURL="http://www.liv.ac.uk/HPC/HTMLF90Course/HTMLF90CourseNotesnode91.html";Blockly.LANG_LISTS_LENGTH_INPUT_LENGTH="length";Blockly.LANG_LISTS_LENGTH_TOOLTIP_1="Returns the length of a list.";Blockly.LANG_LISTS_IS_EMPTY_HELPURL="http://www.liv.ac.uk/HPC/HTMLF90Course/HTMLF90CourseNotesnode91.html";Blockly.LANG_LISTS_INPUT_IS_EMPTY="is empty";Blockly.LANG_LISTS_TOOLTIP_1="Returns true if the list is empty.";Blockly.LANG_LISTS_INDEX_OF_HELPURL="http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Farsubex.htm";Blockly.LANG_LISTS_INDEX_OF_TITLE_FIND="find";Blockly.LANG_LISTS_INDEX_OF_INPUT_OCCURRENCE="occurrence of item";Blockly.LANG_LISTS_INDEX_OF_INPUT_IN_LIST="in list";Blockly.LANG_LISTS_INDEX_OF_TOOLTIP_1="Returns the index of the first/last occurrence\n"+"of the item in the list.\n"+"Returns 0 if text is not found.";Blockly.LANG_LISTS_INDEX_OF_FIRST="first";Blockly.LANG_LISTS_INDEX_OF_LAST="last";Blockly.LANG_LISTS_GET_INDEX_HELPURL="http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Farsubex.htm";Blockly.LANG_LISTS_GET_INDEX_TITLE="get item";Blockly.LANG_LISTS_GET_INDEX_INPUT_AT="at";Blockly.LANG_LISTS_GET_INDEX_INPUT_IN_LIST="in list";Blockly.LANG_LISTS_GET_INDEX_TOOLTIP_1="Returns the value at the specified position in a list.";Blockly.LANG_LISTS_SET_INDEX_HELPURL="http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=%2Fcom.ibm.xlcpp8l.doc%2Flanguage%2Fref%2Farsubex.htm";Blockly.LANG_LISTS_SET_INDEX_TITLE="set item";Blockly.LANG_LISTS_SET_INDEX_INPUT_AT="at";Blockly.LANG_LISTS_SET_INDEX_INPUT_IN_LIST="in list";Blockly.LANG_LISTS_SET_INDEX_INPUT_TO="to";Blockly.LANG_LISTS_SET_INDEX_TOOLTIP_1="Sets the value at the specified position in a list.";Blockly.LANG_VARIABLES_GET_HELPURL="http://en.wikipedia.org/wiki/Variable_(computer_science)";Blockly.LANG_VARIABLES_GET_TITLE_1="get";Blockly.LANG_VARIABLES_GET_ITEM="item";Blockly.LANG_VARIABLES_GET_TOOLTIP_1="Returns the value of this variable.";Blockly.LANG_VARIABLES_SET_HELPURL="http://en.wikipedia.org/wiki/Variable_(computer_science)";Blockly.LANG_VARIABLES_SET_TITLE_1="set";Blockly.LANG_VARIABLES_SET_ITEM="item";Blockly.LANG_VARIABLES_SET_TOOLTIP_1="Sets this variable to be equal to the input.";Blockly.LANG_PROCEDURES_DEFNORETURN_HELPURL="http://en.wikipedia.org/wiki/Procedure_%28computer_science%29";Blockly.LANG_PROCEDURES_DEFNORETURN_PROCEDURE="procedure";Blockly.LANG_PROCEDURES_DEFNORETURN_DO="do";Blockly.LANG_PROCEDURES_DEFNORETURN_TOOLTIP_1="A procedure with no return value.";Blockly.LANG_PROCEDURES_DEFRETURN_HELPURL="http://en.wikipedia.org/wiki/Procedure_%28computer_science%29";Blockly.LANG_PROCEDURES_DEFRETURN_PROCEDURE=Blockly.LANG_PROCEDURES_DEFNORETURN_PROCEDURE;Blockly.LANG_PROCEDURES_DEFRETURN_DO=Blockly.LANG_PROCEDURES_DEFNORETURN_DO;Blockly.LANG_PROCEDURES_DEFRETURN_RETURN="return";Blockly.LANG_PROCEDURES_DEFRETURN_TOOLTIP_1="A procedure with a return value.";Blockly.LANG_PROCEDURES_DEF_DUPLICATE_WARNING="Warning:\n"+"This procedure has\n"+"duplicate parameters.";Blockly.LANG_PROCEDURES_CALLNORETURN_HELPURL="http://en.wikipedia.org/wiki/Procedure_%28computer_science%29";Blockly.LANG_PROCEDURES_CALLNORETURN_CALL="call";Blockly.LANG_PROCEDURES_CALLNORETURN_PROCEDURE="procedure";Blockly.LANG_PROCEDURES_CALLNORETURN_TOOLTIP_1="Call a procedure with no return value.";Blockly.LANG_PROCEDURES_CALLRETURN_HELPURL="http://en.wikipedia.org/wiki/Procedure_%28computer_science%29";Blockly.LANG_PROCEDURES_CALLRETURN_CALL=Blockly.LANG_PROCEDURES_CALLNORETURN_CALL;Blockly.LANG_PROCEDURES_CALLRETURN_PROCEDURE=Blockly.LANG_PROCEDURES_CALLNORETURN_PROCEDURE;Blockly.LANG_PROCEDURES_CALLRETURN_TOOLTIP_1="Call a procedure with a return value.";Blockly.LANG_PROCEDURES_MUTATORCONTAINER_TITLE="parameters";Blockly.LANG_PROCEDURES_MUTATORARG_TITLE="variable:";Blockly.LANG_PROCEDURES_HIGHLIGHT_DEF="Highlight Procedure";Blockly.JavaScript=Blockly.Generator.get("JavaScript");Blockly.JavaScript.variables_get=function(){var a=Blockly.JavaScript.variableDB_.getName(this.getTitleText("VAR"),Blockly.Variables.NAME_TYPE);return[a,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.variables_set=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0";var b=Blockly.JavaScript.variableDB_.getName(this.getTitleText("VAR"),Blockly.Variables.NAME_TYPE);return b+" = "+a+";\n"};Blockly.JavaScript=Blockly.Generator.get("JavaScript");Blockly.JavaScript.procedures_defreturn=function(){var a=Blockly.JavaScript.variableDB_.getName(this.getTitleText("NAME"),Blockly.Procedures.NAME_TYPE);var b=Blockly.JavaScript.statementToCode(this,"STACK");var c=Blockly.JavaScript.valueToCode(this,"RETURN",Blockly.JavaScript.ORDER_NONE)||"";if(c){c="  return "+c+";\n"}var d=[];for(var e=0;e<this.arguments_.length;e++){d[e]=Blockly.JavaScript.variableDB_.getName(this.arguments_[e],Blockly.Variables.NAME_TYPE)}var f="function "+a+"("+d.join(", ")+") {\n"+b+c+"}\n";f=Blockly.JavaScript.scrub_(this,f);Blockly.JavaScript.definitions_[a]=f;return null};Blockly.JavaScript.procedures_defnoreturn=Blockly.JavaScript.procedures_defreturn;Blockly.JavaScript.procedures_callreturn=function(){var a=Blockly.JavaScript.variableDB_.getName(this.getTitleText("NAME"),Blockly.Procedures.NAME_TYPE);var b=[];for(var c=0;c<this.arguments_.length;c++){b[c]=Blockly.JavaScript.valueToCode(this,"ARG"+c,Blockly.JavaScript.ORDER_COMMA)||"null"}var d=a+"("+b.join(", ")+")";return[d,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.procedures_callnoreturn=function(){var a=Blockly.JavaScript.variableDB_.getName(this.getTitleText("NAME"),Blockly.Procedures.NAME_TYPE);var b=[];for(var c=0;c<this.arguments_.length;c++){b[c]=Blockly.JavaScript.valueToCode(this,"ARG"+c,Blockly.JavaScript.ORDER_COMMA)||"null"}var d=a+"("+b.join(", ")+");\n";return d};Blockly.JavaScript=Blockly.Generator.get("JavaScript");Blockly.JavaScript.math_number=function(){var a=parseFloat(this.getTitleText("NUM"));return[a,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.math_arithmetic=function(){var a=this.getTitleValue("OP");var b=Blockly.JavaScript.math_arithmetic.OPERATORS[a];var c=b[0];var d=b[1];var e=Blockly.JavaScript.valueToCode(this,"A",d)||"0";var f=Blockly.JavaScript.valueToCode(this,"B",d)||"0";var g;if(!c){g="Math.pow("+e+", "+f+")";return[g,Blockly.JavaScript.ORDER_FUNCTION_CALL]}g=e+c+f;return[g,d]};Blockly.JavaScript.math_arithmetic.OPERATORS={ADD:[" + ",Blockly.JavaScript.ORDER_ADDITION],MINUS:[" - ",Blockly.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",Blockly.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",Blockly.JavaScript.ORDER_DIVISION],POWER:[null,Blockly.JavaScript.ORDER_COMMA]};Blockly.JavaScript.math_change=function(){var a=Blockly.JavaScript.valueToCode(this,"DELTA",Blockly.JavaScript.ORDER_ADDITION)||"0";var b=Blockly.JavaScript.variableDB_.getName(this.getTitleText("VAR"),Blockly.Variables.NAME_TYPE);return b+" = (typeof "+b+" == 'number' ? "+b+" : 0) + "+a+";\n"};Blockly.JavaScript.math_single=function(){var a=this.getTitleValue("OP");var b;if(a=="NEG"){var c=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_UNARY_NEGATION)||"0";if(c.charAt(0)=="-"){c=" "+c}b="-"+c;return[b,Blockly.JavaScript.ORDER_UNARY_NEGATION]}var d=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"0";var e=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_DIVISION)||"0";switch(a){case"ABS":b="Math.abs("+d+")";break;case"ROOT":b="Math.sqrt("+d+")";break;case"LN":b="Math.log("+d+")";break;case"EXP":b="Math.exp("+d+")";break;case"10POW":b="Math.pow(10,"+d+")";break;case"ROUND":b="Math.round("+d+")";break;case"ROUNDUP":b="Math.ceil("+d+")";break;case"ROUNDDOWN":b="Math.floor("+d+")";break;case"SIN":b="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":b="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":b="Math.tan("+e+" / 180 * Math.PI)";break}if(b){return[b,Blockly.JavaScript.ORDER_FUNCTION_CALL]}switch(a){case"LOG10":b="Math.log("+d+") / Math.log(10)";break;case"ASIN":b="Math.asin("+d+") / Math.PI * 180";break;case"ACOS":b="Math.acos("+d+") / Math.PI * 180";break;case"ATAN":b="Math.atan("+d+") / Math.PI * 180";break;default:throw"Unknown math operator."}return[b,Blockly.JavaScript.ORDER_DIVISION]};Blockly.JavaScript.math_round=Blockly.JavaScript.math_single;Blockly.JavaScript.math_trig=Blockly.JavaScript.math_single;Blockly.JavaScript.math_on_list=function(){var a=this.getTitleValue("OP");var b,c;switch(a){case"SUM":b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]";c=b+".reduce(function(x, y) {return x + y;})";break;case"MIN":b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_COMMA)||"[]";c="Math.min.apply(null, "+b+")";break;case"MAX":b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_COMMA)||"[]";c="Math.max.apply(null, "+b+")";break;case"AVERAGE":if(!Blockly.JavaScript.definitions_["math_mean"]){var d=Blockly.JavaScript.variableDB_.getDistinctName("math_mean",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.math_on_list.math_mean=d;var a=[];a.push("function "+d+"(myList) {");a.push("  return myList.reduce(function(x, y) {return x + y;}) / "+"myList.length;");a.push("}");Blockly.JavaScript.definitions_["math_mean"]=a.join("\n")}b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]";c=Blockly.JavaScript.math_on_list.math_mean+"("+b+")";break;case"MEDIAN":if(!Blockly.JavaScript.definitions_["math_median"]){var d=Blockly.JavaScript.variableDB_.getDistinctName("math_median",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.math_on_list.math_median=d;var a=[];a.push("function "+d+"(myList) {");a.push("  var localList = myList.filter(function (x) "+"{return typeof x == 'number';});");a.push("  if (!localList.length) return null;");a.push("  localList.sort(function(a, b) {return b - a;});");a.push("  if (localList.length % 2 == 0) {");a.push("    return (localList[localList.length / 2 - 1] + "+"localList[localList.length / 2]) / 2;");a.push("  } else {");a.push("    return localList[(localList.length - 1) / 2];");a.push("  }");a.push("}");Blockly.JavaScript.definitions_["math_median"]=a.join("\n")}b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]";c=Blockly.JavaScript.math_on_list.math_median+"("+b+")";break;case"MODE":if(!Blockly.JavaScript.definitions_["math_modes"]){var d=Blockly.JavaScript.variableDB_.getDistinctName("math_modes",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.math_on_list.math_modes=d;var a=[];a.push("function "+d+"(values) {");a.push("  var modes = [];");a.push("  var counts = [];");a.push("  var maxCount = 0;");a.push("  for (var i = 0; i < values.length; i++) {");a.push("    var value = values[i];");a.push("    var found = false;");a.push("    var thisCount;");a.push("    for (var j = 0; j < counts.length; j++) {");a.push("      if (counts[j][0] === value) {");a.push("        thisCount = ++counts[j][1];");a.push("        found = true;");a.push("        break;");a.push("      }");a.push("    }");a.push("    if (!found) {");a.push("      counts.push([value, 1]);");a.push("      thisCount = 1;");a.push("    }");a.push("    maxCount = Math.max(thisCount, maxCount);");a.push("  }");a.push("  for (var j = 0; j < counts.length; j++) {");a.push("    if (counts[j][1] == maxCount) {");a.push("        modes.push(counts[j][0]);");a.push("    }");a.push("  }");a.push("  return modes;");a.push("}");Blockly.JavaScript.definitions_["math_modes"]=a.join("\n")}b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]";c=Blockly.JavaScript.math_on_list.math_modes+"("+b+")";break;case"STD_DEV":if(!Blockly.JavaScript.definitions_["math_standard_deviation"]){var d=Blockly.JavaScript.variableDB_.getDistinctName("math_standard_deviation",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.math_on_list.math_standard_deviation=d;var a=[];a.push("function "+d+"(numbers) {");a.push("  var n = numbers.length;");a.push("  if (!n) return null;");a.push("  var mean = numbers.reduce(function(x, y) "+"{return x + y;}) / n;");a.push("  var variance = 0;");a.push("  for (var j = 0; j < n; j++) {");a.push("    variance += Math.pow(numbers[j] - mean, 2);");a.push("  }");a.push("  variance = variance / n;");a.push("  standard_dev = Math.sqrt(variance);");a.push("  return standard_dev;");a.push("}");Blockly.JavaScript.definitions_["math_standard_deviation"]=a.join("\n")}b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]";c=Blockly.JavaScript.math_on_list.math_standard_deviation+"("+b+")";break;case"RANDOM":if(!Blockly.JavaScript.definitions_["math_random_item"]){var d=Blockly.JavaScript.variableDB_.getDistinctName("math_random_item",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.math_on_list.math_random_item=d;var a=[];a.push("function "+d+"(list) {");a.push("  var x = Math.floor(Math.random() * list.length);");a.push("  return list[x];");a.push("}");Blockly.JavaScript.definitions_["math_random_item"]=a.join("\n")}b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]";c=Blockly.JavaScript.math_on_list.math_random_item+"("+b+")";break;default:throw"Unknown operator."}return[c,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.math_constrain=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_COMMA)||"0";var b=Blockly.JavaScript.valueToCode(this,"LOW",Blockly.JavaScript.ORDER_COMMA)||"0";var c=Blockly.JavaScript.valueToCode(this,"HIGH",Blockly.JavaScript.ORDER_COMMA)||"0";var d="Math.min(Math.max("+a+", "+b+"), "+c+")";return[d,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.math_modulo=function(){var a=Blockly.JavaScript.valueToCode(this,"DIVIDEND",Blockly.JavaScript.ORDER_MODULUS)||"0";var b=Blockly.JavaScript.valueToCode(this,"DIVISOR",Blockly.JavaScript.ORDER_MODULUS)||"0";var c=a+" % "+b;return[c,Blockly.JavaScript.ORDER_MODULUS]};Blockly.JavaScript.math_random_int=function(){var a=Blockly.JavaScript.valueToCode(this,"FROM",Blockly.JavaScript.ORDER_COMMA)||"0";var b=Blockly.JavaScript.valueToCode(this,"TO",Blockly.JavaScript.ORDER_COMMA)||"0";if(!Blockly.JavaScript.definitions_["math_random_int"]){var c=Blockly.JavaScript.variableDB_.getDistinctName("math_random_int",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.math_random_int.random_function=c;var d=[];d.push("function "+c+"(a, b) {");d.push("  if (a > b) {");d.push("    // Swap a and b to ensure a is smaller.");d.push("    var c = a;");d.push("    a = b;");d.push("    b = c;");d.push("  }");d.push("  return Math.floor(Math.random() * (b - a + 1) + a);");d.push("}");Blockly.JavaScript.definitions_["math_random_int"]=d.join("\n")}code=Blockly.JavaScript.math_random_int.random_function+"("+a+", "+b+")";return[code,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.math_random_float=function(){return["Math.random()",Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript=Blockly.Generator.get("JavaScript");Blockly.JavaScript.logic_compare=function(){var a=this.getTitleValue("OP");var b=Blockly.JavaScript.logic_compare.OPERATORS[a];var c=b=="=="||b=="!="?Blockly.JavaScript.ORDER_EQUALITY:Blockly.JavaScript.ORDER_RELATIONAL;var d=Blockly.JavaScript.valueToCode(this,"A",c)||"0";var e=Blockly.JavaScript.valueToCode(this,"B",c)||"0";var f=d+" "+b+" "+e;return[f,c]};Blockly.JavaScript.logic_compare.OPERATORS={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="};Blockly.JavaScript.logic_operation=function(){var a=this.getTitleValue("OP")=="AND"?"&&":"||";var b=a=="&&"?Blockly.JavaScript.ORDER_LOGICAL_AND:Blockly.JavaScript.ORDER_LOGICAL_OR;var c=Blockly.JavaScript.valueToCode(this,"A",b)||"false";var d=Blockly.JavaScript.valueToCode(this,"B",b)||"false";var e=c+" "+a+" "+d;return[e,b]};Blockly.JavaScript.logic_negate=function(){var a=Blockly.JavaScript.ORDER_LOGICAL_NOT;var b=Blockly.JavaScript.valueToCode(this,"BOOL",a)||"false";var c="!"+b;return[c,a]};Blockly.JavaScript.logic_boolean=function(){var a=this.getTitleValue("BOOL")=="TRUE"?"true":"false";return[a,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript=Blockly.Generator.get("JavaScript");Blockly.JavaScript.lists_create_empty=function(){return["[]",Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.lists_create_with=function(){var a=new Array(this.itemCount_);for(var b=0;b<this.itemCount_;b++){a[b]=Blockly.JavaScript.valueToCode(this,"ADD"+b,Blockly.JavaScript.ORDER_COMMA)||"null"}a="["+a.join(", ")+"]";return[a,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.lists_repeat=function(){if(!Blockly.JavaScript.definitions_["lists_repeat"]){var a=Blockly.JavaScript.variableDB_.getDistinctName("lists_repeat",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.lists_repeat.repeat=a;var b=[];b.push("function "+a+"(value, n) {");b.push("  var array = [];");b.push("  for (var i = 0; i < n; i++) {");b.push("    array[i] = value;");b.push("  }");b.push("  return array;");b.push("}");Blockly.JavaScript.definitions_["lists_repeat"]=b.join("\n")}var c=Blockly.JavaScript.valueToCode(this,"ITEM",Blockly.JavaScript.ORDER_COMMA)||"null";var d=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_COMMA)||"0";var e=Blockly.JavaScript.lists_repeat.repeat+"("+c+", "+d+")";return[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.lists_length=function(){return Blockly.JavaScript.text_length.call(this)};Blockly.JavaScript.lists_isEmpty=function(){return Blockly.JavaScript.text_isEmpty.call(this)};Blockly.JavaScript.lists_indexOf=function(){return Blockly.JavaScript.text_indexOf.call(this)};Blockly.JavaScript.lists_getIndex=function(){return Blockly.JavaScript.text_charAt.call(this)};Blockly.JavaScript.lists_setIndex=function(){var a=Blockly.JavaScript.valueToCode(this,"AT",Blockly.JavaScript.ORDER_NONE)||"1";var b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]";var c=Blockly.JavaScript.valueToCode(this,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"null";if(a.match(/^\d+$/)){a=parseInt(a,10)-1}else{a+=" - 1"}return b+"["+a+"] = "+c+";\n"};Blockly.JavaScript=Blockly.Generator.get("JavaScript");Blockly.JavaScript.controls_if=function(){var a=0;var b=Blockly.JavaScript.valueToCode(this,"IF"+a,Blockly.JavaScript.ORDER_NONE)||"false";var c=Blockly.JavaScript.statementToCode(this,"DO"+a);var d="if ("+b+") {\n"+c+"}";for(a=1;a<=this.elseifCount_;a++){b=Blockly.JavaScript.valueToCode(this,"IF"+a,Blockly.JavaScript.ORDER_NONE)||"false";c=Blockly.JavaScript.statementToCode(this,"DO"+a);d+=" else if ("+b+") {\n"+c+"}"}if(this.elseCount_){c=Blockly.JavaScript.statementToCode(this,"ELSE");d+=" else {\n"+c+"}"}return d+"\n"};Blockly.JavaScript.controls_whileUntil=function(){var a=this.getTitleValue("MODE")=="UNTIL";var b=Blockly.JavaScript.valueToCode(this,"BOOL",a?Blockly.JavaScript.ORDER_LOGICAL_NOT:Blockly.JavaScript.ORDER_NONE)||"false";var c=Blockly.JavaScript.statementToCode(this,"DO");if(a){b="!"+b}return"while ("+b+") {\n"+c+"}\n"};Blockly.JavaScript.controls_for=function(){var a=Blockly.JavaScript.variableDB_.getName(this.getInputVariable("VAR"),Blockly.Variables.NAME_TYPE);var b=Blockly.JavaScript.valueToCode(this,"FROM",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0";var c=Blockly.JavaScript.valueToCode(this,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0";var d=Blockly.JavaScript.statementToCode(this,"DO");var e;if(c.match(/^\w+$/)){e="for ("+a+" = "+b+"; "+a+" <= "+c+"; "+a+"++) {\n"+d+"}\n"}else{var f=Blockly.JavaScript.variableDB_.getDistinctName(a+"_end",Blockly.Variables.NAME_TYPE);e="var "+f+" = "+c+";\n"+"for ("+a+" = "+b+"; "+a+" <= "+f+"; "+a+"++) {\n"+d+"}\n"}return e};Blockly.JavaScript.controls_forEach=function(){var a=Blockly.JavaScript.variableDB_.getName(this.getInputVariable("VAR"),Blockly.Variables.NAME_TYPE);var b=Blockly.JavaScript.valueToCode(this,"LIST",Blockly.JavaScript.ORDER_ASSIGNMENT)||"[]";var c=Blockly.JavaScript.statementToCode(this,"DO");var d;var e=Blockly.JavaScript.variableDB_.getDistinctName(a+"_index",Blockly.Variables.NAME_TYPE);if(b.match(/^\w+$/)){c="  "+a+" = "+b+"["+e+"];\n"+c;d="for (var "+e+" in  "+b+") {\n"+c+"}\n"}else{var f=Blockly.JavaScript.variableDB_.getDistinctName(a+"_list",Blockly.Variables.NAME_TYPE);c="  "+a+" = "+f+"["+e+"];\n"+c;d="var "+f+" = "+b+";\n"+"for (var "+e+" in "+f+") {\n"+c+"}\n"}return d};Blockly.JavaScript.controls_flow_statements=function(){switch(this.getTitleValue("FLOW")){case"BREAK":return"break;\n";case"CONTINUE":return"continue;\n"}throw"Unknown flow statement."};if(!Blockly.Language)Blockly.Language={};Blockly.Language.text={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_TEXT_HELPURL,init:function(){this.appendTitle("“");this.appendTitle(new Blockly.FieldTextInput(""),"TEXT");this.appendTitle("”");this.setOutput(true,String);this.setTooltip(Blockly.LANG_TEXT_TEXT_TOOLTIP_1)}};Blockly.Language.text_join={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_JOIN_HELPURL,init:function(){this.appendTitle(Blockly.LANG_TEXT_JOIN_TITLE_CREATEWITH);this.appendInput("",Blockly.INPUT_VALUE,"ADD0",null);this.appendInput("",Blockly.INPUT_VALUE,"ADD1",null);this.setOutput(true,String);this.setMutator(new Blockly.Mutator(["text_create_join_item"]));this.setTooltip(Blockly.LANG_TEXT_JOIN_TOOLTIP_1);this.itemCount_=2},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("items",this.itemCount_);return a},domToMutation:function(a){for(var b=0;b<this.itemCount_;b++){this.removeInput("ADD"+b)}this.itemCount_=parseInt(a.getAttribute("items"),10);for(var b=0;b<this.itemCount_;b++){this.appendInput("",Blockly.INPUT_VALUE,"ADD"+b,null)}},decompose:function(a){var b=new Blockly.Block(a,"text_create_join_container");b.initSvg();var c=b.inputList[0];for(var d=0;d<this.itemCount_;d++){var e=new Blockly.Block(a,"text_create_join_item");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){for(var b=this.itemCount_-1;b>=0;b--){this.removeInput("ADD"+b)}this.itemCount_=0;var c=a.getInputTargetBlock("STACK");while(c){var d=this.appendInput("",Blockly.INPUT_VALUE,"ADD"+this.itemCount_,null);if(c.valueInput_){d.connect(c.valueInput_)}this.itemCount_++;c=c.nextConnection&&c.nextConnection.targetBlock()}},saveConnections:function(a){var b=a.getInputTargetBlock("STACK");var c=0;while(b){var d=this.getInput("ADD"+c);b.valueInput_=d&&d.targetConnection;c++;b=b.nextConnection&&b.nextConnection.targetBlock()}}};Blockly.Language.text_create_join_container={init:function(){this.appendTitle(Blockly.LANG_TEXT_CREATE_JOIN_TITLE_JOIN);this.appendInput("",Blockly.NEXT_STATEMENT,"STACK");this.setTooltip(Blockly.LANG_TEXT_CREATE_JOIN_TOOLTIP_1);this.contextMenu=false}};Blockly.Language.text_create_join_item={init:function(){this.appendTitle(Blockly.LANG_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_TEXT_CREATE_JOIN_ITEM_TOOLTIP_1);this.contextMenu=false}};Blockly.Language.text_length={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_LENGTH_HELPURL,init:function(){this.appendInput(Blockly.LANG_TEXT_LENGTH_INPUT_LENGTH,Blockly.INPUT_VALUE,"VALUE",[String,Array]);this.setOutput(true,Number);this.setTooltip(Blockly.LANG_TEXT_LENGTH_TOOLTIP_1)}};Blockly.Language.text_isEmpty={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_ISEMPTY_HELPURL,init:function(){this.appendInput(Blockly.LANG_TEXT_ISEMPTY_INPUT_ISEMPTY,Blockly.INPUT_VALUE,"VALUE",[String,Array]);this.setOutput(true,Boolean);this.setTooltip(Blockly.LANG_TEXT_ISEMPTY_TOOLTIP_1)}};Blockly.Language.text_endString={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_ENDSTRING_HELPURL,init:function(){this.setOutput(true,String);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendInput([a,"END"],Blockly.INPUT_VALUE,"NUM",Number);this.appendInput(Blockly.LANG_TEXT_ENDSTRING_INPUT,Blockly.INPUT_VALUE,"TEXT",String);this.setInputsInline(true);this.setTooltip(Blockly.LANG_TEXT_ENDSTRING_TOOLTIP_1)}};Blockly.Language.text_endString.OPERATORS=[[Blockly.LANG_TEXT_ENDSTRING_OPERATOR_FIRST,"FIRST"],[Blockly.LANG_TEXT_ENDSTRING_OPERATOR_LAST,"LAST"]];Blockly.Language.text_indexOf={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_INDEXOF_HELPURL,init:function(){this.setOutput(true,Number);this.appendTitle(Blockly.LANG_TEXT_INDEXOF_TITLE_FIND);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendTitle(a,"END");this.appendInput(Blockly.LANG_TEXT_INDEXOF_INPUT_OCCURRENCE,Blockly.INPUT_VALUE,"FIND",String);this.appendInput(Blockly.LANG_TEXT_INDEXOF_INPUT_INTEXT,Blockly.INPUT_VALUE,"VALUE",String);this.setInputsInline(true);this.setTooltip(Blockly.LANG_TEXT_INDEXOF_TOOLTIP_1)}};Blockly.Language.text_indexOf.OPERATORS=[[Blockly.LANG_TEXT_INDEXOF_OPERATOR_FIRST,"FIRST"],[Blockly.LANG_TEXT_INDEXOF_OPERATOR_LAST,"LAST"]];Blockly.Language.text_charAt={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_CHARAT_HELPURL,init:function(){this.appendTitle(Blockly.LANG_TEXT_CHARAT_TITLE_LETTER);this.setOutput(true,String);this.appendInput(Blockly.LANG_TEXT_CHARAT_INPUT_AT,Blockly.INPUT_VALUE,"AT",Number);this.appendInput(Blockly.LANG_TEXT_CHARAT_INPUT_INTEXT,Blockly.INPUT_VALUE,"VALUE",String);this.setInputsInline(true);this.setTooltip(Blockly.LANG_TEXT_CHARAT_TOOLTIP_1)}};Blockly.Language.text_changeCase={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_CHANGECASE_HELPURL,init:function(){this.appendTitle(Blockly.LANG_TEXT_CHANGECASE_TITLE_TO);var a=new Blockly.FieldDropdown(this.OPERATORS);this.appendInput([a,"CASE"],Blockly.INPUT_VALUE,"TEXT",String);this.setOutput(true,String);this.setTooltip(Blockly.LANG_TEXT_CHANGECASE_TOOLTIP_1)}};Blockly.Language.text_changeCase.OPERATORS=[[Blockly.LANG_TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[Blockly.LANG_TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[Blockly.LANG_TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];Blockly.Language.text_trim={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_TRIM_HELPURL,init:function(){this.appendTitle(Blockly.LANG_TEXT_TRIM_TITLE_SPACE);var a=new Blockly.FieldDropdown(this.OPERATORS,function(a){var b=a==Blockly.LANG_TEXT_TRIM_OPERATOR_BOTH?Blockly.LANG_TEXT_TRIM_TITLE_SIDES:Blockly.LANG_TEXT_TRIM_TITLE_SIDE;this.sourceBlock_.setTitleText(b,"SIDES");this.setText(a)});this.appendTitle(a,"MODE");this.appendTitle(Blockly.LANG_TEXT_TRIM_TITLE_SIDES,"SIDES");this.appendInput("",Blockly.INPUT_VALUE,"TEXT",String);this.setOutput(true,String);this.setTooltip(Blockly.LANG_TEXT_TRIM_TOOLTIP_1)},mutationToDom:function(){var a=document.createElement("mutation");var b=this.getTitleValue("MODE")=="BOTH";a.setAttribute("plural",b);return a},domToMutation:function(a){var b=a.getAttribute("plural")=="true";this.setTitleText(b?Blockly.LANG_TEXT_TRIM_TITLE_SIDES:Blockly.LANG_TEXT_TRIM_TITLE_SIDE,"SIDES")}};Blockly.Language.text_trim.OPERATORS=[[Blockly.LANG_TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[Blockly.LANG_TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[Blockly.LANG_TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];Blockly.Language.text_print={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle(Blockly.LANG_TEXT_PRINT_TITLE_PRINT);this.appendInput("",Blockly.INPUT_VALUE,"TEXT",null);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip(Blockly.LANG_TEXT_PRINT_TOOLTIP_1)}};Blockly.Language.text_strobe={category:"Arduino",helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle("Strobe");this.appendInput("LED@",Blockly.INPUT_VALUE,"NUM",Number);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Strobe")}};Blockly.Language.text_on={category:"Arduino",helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle("On");this.appendInput("LED@",Blockly.INPUT_VALUE,"NUM",Number);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("On")}};Blockly.Language.text_off={category:"Arduino",helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle("Off");this.appendInput("LED@",Blockly.INPUT_VALUE,"NUM",Number);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Off")}};Blockly.Language.servo_init={category:"Motor",helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle("Init");this.appendInput("Servo@",Blockly.INPUT_VALUE,"NUM",Number);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Init Servo")}};Blockly.Language.servo_move={category:"Motor",helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle("Move");this.appendInput("Servo@",Blockly.INPUT_VALUE,"NUM",Number);this.appendInput("to",Blockly.INPUT_VALUE,"NUM2",Number);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Move Servo")}};Blockly.Language.wait={category:"Arduino",helpUrl:Blockly.LANG_CONTROLS_WHILEUNTIL_HELPURL,init:function(){this.appendTitle("Wait");this.appendInput("for",Blockly.INPUT_VALUE,"NUM",Number);this.appendInput("then",Blockly.NEXT_STATEMENT,"DO");this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Wait")}};Blockly.Language.button={category:"Arduino",helpUrl:Blockly.LANG_CONTROLS_WHILEUNTIL_HELPURL,init:function(){this.appendTitle("Button");this.appendInput("@",Blockly.INPUT_VALUE,"PIN",Number);this.appendInput("Hit:",Blockly.NEXT_STATEMENT,"HIT");this.appendInput("Release:",Blockly.NEXT_STATEMENT,"RELEASE");this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Button")}};Blockly.Language.piezo_init={category:"Sound",helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle("Init");this.appendInput("Piezo@",Blockly.INPUT_VALUE,"PIN",Number);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Init Piezo")}};Blockly.Language.piezo_tone={category:"Sound",helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle("Tone");this.appendInput("Piezo@",Blockly.INPUT_VALUE,"PIN",Number);this.appendInput("Volume",Blockly.INPUT_VALUE,"VOL",Number);this.appendInput("Time",Blockly.INPUT_VALUE,"TIME",Number);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Piezo Tone")}};Blockly.Language.piezo_fade={category:"Sound",helpUrl:Blockly.LANG_TEXT_PRINT_HELPURL,init:function(){this.appendTitle("Fade");this.appendInput("Piezo@",Blockly.INPUT_VALUE,"PIN",Number);this.appendInput("Volume",Blockly.INPUT_VALUE,"VOL",Number);this.appendInput("Time",Blockly.INPUT_VALUE,"TIME",Number);this.setPreviousStatement(true);this.setNextStatement(true);this.setTooltip("Piezo Fade")}};Blockly.Language.text_prompt={category:Blockly.LANG_CATEGORY_TEXT,helpUrl:Blockly.LANG_TEXT_PROMPT_HELPURL,init:function(){this.appendTitle(Blockly.LANG_TEXT_PROMPT_TITLE_PROMPT_FOR);var a=new Blockly.FieldDropdown(this.TYPES);this.appendTitle(a,"TYPE");this.appendTitle(Blockly.LANG_TEXT_PROMPT_TITILE_WITH_MESSAGE);this.appendTitle(new Blockly.FieldTextInput(""),"TEXT");this.setOutput(true,[Number,String]);this.setTooltip(Blockly.LANG_TEXT_PROMPT_TOOLTIP_1)}};Blockly.Language.text_prompt.TYPES=[[Blockly.LANG_TEXT_PROMPT_TYPE_TEXT,"TEXT"],[Blockly.LANG_TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];Blockly.JavaScript=Blockly.Generator.get("JavaScript");Blockly.JavaScript.text=function(){var a=Blockly.JavaScript.quote_(this.getTitleText("TEXT"));return[a,Blockly.JavaScript.ORDER_ATOMIC]};Blockly.JavaScript.text_join=function(){var a;if(this.itemCount_==0){return["''",Blockly.JavaScript.ORDER_ATOMIC]}else if(this.itemCount_==1){var b=Blockly.JavaScript.valueToCode(this,"ADD0",Blockly.JavaScript.ORDER_NONE)||"''";a="String("+b+")";return[a,Blockly.JavaScript.ORDER_FUNCTION_CALL]}else if(this.itemCount_==2){var b=Blockly.JavaScript.valueToCode(this,"ADD0",Blockly.JavaScript.ORDER_NONE)||"''";var c=Blockly.JavaScript.valueToCode(this,"ADD1",Blockly.JavaScript.ORDER_NONE)||"''";a="String("+b+") + String("+c+")";return[a,Blockly.JavaScript.ORDER_ADDITION]}else{a=new Array(this.itemCount_);for(var d=0;d<this.itemCount_;d++){a[d]=Blockly.JavaScript.valueToCode(this,"ADD"+d,Blockly.JavaScript.ORDER_COMMA)||"''"}a="["+a.join(",")+"].join('')";return[a,Blockly.JavaScript.ORDER_FUNCTION_CALL]}};Blockly.JavaScript.text_length=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''";return[a+".length",Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.text_isEmpty=function(){var a=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''";return["!"+a+".length",Blockly.JavaScript.ORDER_LOGICAL_NOT]};Blockly.JavaScript.text_endString=function(){var a=this.getTitleValue("END")=="FIRST";var b;if(a){var c=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_COMMA)||"1";var d=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''";b=d+".substring(0, "+c+")"}else{if(!Blockly.JavaScript.definitions_["text_tailString"]){var e=Blockly.JavaScript.variableDB_.getDistinctName("text_tailString",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.text_endString.text_tailString=e;var f=[];f.push("function "+e+"(n, myString) {");f.push("  // Return a trailing substring of n characters.");f.push("  return myString.substring(myString.length - n);");f.push("}");Blockly.JavaScript.definitions_["text_tailString"]=f.join("\n")}var c=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_COMMA)||"1";var d=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_COMMA)||"''";b=Blockly.JavaScript.text_endString.text_tailString+"("+c+", "+d+")"}return[b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_indexOf=function(){var a=this.getTitleValue("END")=="FIRST"?"indexOf":"lastIndexOf";var b=Blockly.JavaScript.valueToCode(this,"FIND",Blockly.JavaScript.ORDER_NONE)||"''";var c=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''";var d=c+"."+a+"("+b+") + 1";return[d,Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.text_charAt=function(){var a=Blockly.JavaScript.valueToCode(this,"AT",Blockly.JavaScript.ORDER_NONE)||"1";var b=Blockly.JavaScript.valueToCode(this,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";if(a.match(/^\d+$/)){a=parseInt(a,10)-1}else{a+=" - 1"}var c=b+"["+a+"]";return[c,Blockly.JavaScript.ORDER_MEMBER]};Blockly.JavaScript.text_changeCase=function(){var a=this.getTitleValue("CASE");var b=Blockly.JavaScript.text_changeCase.OPERATORS[a];var c;if(b){var d=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''";c=d+b}else{if(!Blockly.JavaScript.definitions_["text_toTitleCase"]){var e=Blockly.JavaScript.variableDB_.getDistinctName("text_toTitleCase",Blockly.Generator.NAME_TYPE);Blockly.JavaScript.text_changeCase.toTitleCase=e;var f=[];f.push("function "+e+"(str) {");f.push("  return str.replace(/\\S+/g,");f.push("      function(txt) {return txt.charAt(0).toUpperCase() + "+"txt.substr(1).toLowerCase();});");f.push("}");Blockly.JavaScript.definitions_["text_toTitleCase"]=f.join("\n")}var d=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";c=Blockly.JavaScript.text_changeCase.toTitleCase+"("+d+")"}return[c,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_changeCase.OPERATORS={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null};Blockly.JavaScript.text_trim=function(){var a=this.getTitleValue("MODE");var b=Blockly.JavaScript.text_trim.OPERATORS[a];var c=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''";return[c+b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.JavaScript.text_trim.OPERATORS={LEFT:".replace(/^\\s+/, '')",RIGHT:".replace(/\\s+$/, '')",BOTH:".replace(/^\\s+|\\s+$/g, '')"};Blockly.JavaScript.text_print=function(){var a=Blockly.JavaScript.valueToCode(this,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''";return"console.log("+a+");\n"};Blockly.JavaScript.text_strobe=function(){var a=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"''";return"(new five.Led("+a*1+")).strobe();\n"};Blockly.JavaScript.text_on=function(){var a=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"''";return"(new five.Led("+a*1+")).on();\n"};Blockly.JavaScript.text_off=function(){var a=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"''";return"(new five.Led("+a*1+")).off();\n"};Blockly.JavaScript.servo_init=function(){var a=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"''";return"var servo"+a*1+" = new five.Servo("+a*1+");\nboard.repl.inject({servo: servo"+a*1+"});\n"};Blockly.JavaScript.servo_move=function(){var a=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"''";var b=Blockly.JavaScript.valueToCode(this,"NUM2",Blockly.JavaScript.ORDER_NONE)||"''";return"servo"+a*1+".move("+b*1+");\n"};Blockly.JavaScript.wait=function(){var a=Blockly.JavaScript.valueToCode(this,"NUM",Blockly.JavaScript.ORDER_NONE)||"''";var b=Blockly.JavaScript.statementToCode(this,"DO");return"board.wait("+a*1+", function(){\n"+b+"});\n"};Blockly.JavaScript.button=function(){var a=Blockly.JavaScript.valueToCode(this,"PIN",Blockly.JavaScript.ORDER_NONE)||"''";var b=Blockly.JavaScript.statementToCode(this,"HIT");var c=Blockly.JavaScript.statementToCode(this,"RELEASE");a*=1;return"var bumper"+a+" = new five.Button("+a+");\nbumper"+a+'.on("hit", function(){\n'+b+'}).on("release", function(){\n'+c+"\n});"};Blockly.JavaScript.piezo_init=function(){var a=Blockly.JavaScript.valueToCode(this,"PIN",Blockly.JavaScript.ORDER_NONE)||"''";a*=1;return"var piezo"+a+" = new five.Piezo("+a+");\nboard.repl.inject({piezo: piezo"+a+"});\n"};Blockly.JavaScript.piezo_tone=function(){var a=Blockly.JavaScript.valueToCode(this,"PIN",Blockly.JavaScript.ORDER_NONE)||"''";a*=1;var b=Blockly.JavaScript.valueToCode(this,"VOL",Blockly.JavaScript.ORDER_NONE)||"''";b*=1;var c=Blockly.JavaScript.valueToCode(this,"TIME",Blockly.JavaScript.ORDER_NONE)||"''";c*=1;return"piezo"+a+".tone("+b+","+c+");\n"};Blockly.JavaScript.piezo_fade=function(){var a=Blockly.JavaScript.valueToCode(this,"PIN",Blockly.JavaScript.ORDER_NONE)||"''";a*=1;var b=Blockly.JavaScript.valueToCode(this,"VOL",Blockly.JavaScript.ORDER_NONE)||"''";b*=1;var c=Blockly.JavaScript.valueToCode(this,"TIME",Blockly.JavaScript.ORDER_NONE)||"''";c*=1;return"piezo"+a+".fade("+b+","+c+");\n"};Blockly.JavaScript.text_prompt=function(){var a=Blockly.JavaScript.quote_(this.getTitleValue("TEXT"));var b="prompt("+a+")";var c=this.getTitleValue("TYPE")=="NUMBER";if(c){b="parseFloat("+b+")"}return[b,Blockly.JavaScript.ORDER_FUNCTION_CALL]};Blockly.Xml={};Blockly.Xml.workspaceToDom=function(a){var b=document.createElement("xml");var c=a.getTopBlocks(false);for(var d=0,e;e=c[d];d++){var f=Blockly.Xml.blockToDom_(e);var g=e.getRelativeToSurfaceXY();f.setAttribute("x",Blockly.RTL?-g.x:g.x);f.setAttribute("y",g.y);b.appendChild(f)}return b};Blockly.Xml.blockToDom_=function(a){function d(a){if(a.name){var b={text:a.getValue()}}}var b=document.createElement("block");b.setAttribute("type",a.type);if(a.mutationToDom){var c=a.mutationToDom();if(c){b.appendChild(c)}}for(var e=0,f;f=a.titleRow[e];e++){d(f)}for(var g=0,h;h=a.inputList[g];g++){if(h.label){d(h.label)}}if(a.comment){var i=document.createElement("comment");var j={text:a.comment.getText()};i.appendChild(j);i.setAttribute("pinned",a.comment.isPinned());var k=a.comment.getBubbleLocation();i.setAttribute("x",k.x);i.setAttribute("y",k.y);var l=a.comment.getBubbleSize();i.setAttribute("h",l.height);i.setAttribute("w",l.width);b.appendChild(i)}var m=false;for(var e=0,h;h=a.inputList[e];e++){var n;var o=true;if(h.type==Blockly.DUMMY_INPUT){continue}else if(h.type==Blockly.LOCAL_VARIABLE){n=document.createElement("variable");n.setAttribute("data",h.getText());o=false}else{var p=h.targetBlock();if(h.type==Blockly.INPUT_VALUE){n=document.createElement("value");m=true}else if(h.type==Blockly.NEXT_STATEMENT){n=document.createElement("statement")}if(p){n.appendChild(Blockly.Xml.blockToDom_(p));o=false}}n.setAttribute("name",h.name);if(!o){b.appendChild(n)}}if(m){b.setAttribute("inline",a.inputsInline)}if(a.collapsed){b.setAttribute("collapsed",true)}if(a.disabled){b.setAttribute("disabled",true)}if(a.nextConnection){var q=a.nextConnection.targetBlock();if(q){var n=document.createElement("next");n.appendChild(Blockly.Xml.blockToDom_(q));b.appendChild(n)}}return b};Blockly.Xml.domToText=function(a){var b=new XMLSerializer;return b.serializeToString(a)};Blockly.Xml.domToPrettyText=function(a){var b=Blockly.Xml.domToText(a);var c=b.split("<");var d="";for(var e=1;e<c.length;e++){var f=c[e][0];if(f=="/"){d=d.substring(2)}c[e]=d+"<"+c[e];if(f!="/"){d+="  "}}var g=c.join("\n");g=g.replace(/(<(\w+)[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>");return g.replace(/^\n/,"")};Blockly.Xml.textToDom=function(a){var b=new DOMParser;var c=b.parseFromString(a,"text/xml");if(!c||!c.firstChild||c.firstChild.tagName!="xml"||c.firstChild!==c.lastChild){throw"Blockly.Xml.textToDom did not obtain a valid XML tree."}return c.firstChild};Blockly.Xml.domToWorkspace=function(a,b){for(var c=0,d;d=b.childNodes[c];c++){if(d.nodeName&&d.nodeName.toLowerCase()=="block"){var e=Blockly.Xml.domToBlock_(a,d)}}};Blockly.Xml.domToBlock_=function(a,b){var c=b.getAttribute("type");var d=new Blockly.Block(a,c);for(var e=0,f;f=b.childNodes[e];e++){if(f.nodeType==3&&f.data.match(/^\s*$/)){continue}var g=null;var h;var i=null;for(var j=0,k;k=f.childNodes[j];j++){if(k.nodeType!=3||!k.data.match(/^\s*$/)){i=k}}var l=f.getAttribute("name");switch(f.tagName.toLowerCase()){case"mutation":if(d.domToMutation){d.domToMutation(f)}break;case"comment":d.setCommentText(f.textContent);var m=f.getAttribute("pinned");if(m){d.comment.setPinned(m=="true")}var n=parseInt(f.getAttribute("x"),10);var o=parseInt(f.getAttribute("y"),10);if(!isNaN(n)&&!isNaN(o)){d.comment.setBubbleLocation(n,o,false)}var p=parseInt(f.getAttribute("w"),10);var q=parseInt(f.getAttribute("h"),10);if(!isNaN(p)&&!isNaN(q)){d.comment.setBubbleSize(p,q)}break;case"title":d.setTitleValue(f.textContent,l);break;case"variable":var r=f.getAttribute("data");if(r!==null){h=d.getInput(l);if(!h){throw"Variable input does not exist."}h.setText(r)}break;case"value":case"statement":h=d.getInput(l);if(!h){throw"Input does not exist."}if(i&&i.tagName&&i.tagName.toLowerCase()=="block"){g=Blockly.Xml.domToBlock_(a,i);if(g.outputConnection){h.connect(g.outputConnection)}else if(g.previousConnection){h.connect(g.previousConnection)}else{throw"Child block does not have output or previous statement."}}break;case"next":if(i&&i.tagName&&i.tagName.toLowerCase()=="block"){if(!d.nextConnection){throw"Next statement does not exist."}else if(d.nextConnection.targetConnection){throw"Next statement is already connected."}g=Blockly.Xml.domToBlock_(a,i);if(!g.previousConnection){throw"Next block does not have previous statement."}d.nextConnection.connect(g.previousConnection)}break;default:}}var s=b.getAttribute("inline");if(s){d.setInputsInline(s=="true")}var t=b.getAttribute("collapsed");if(t){d.setCollapsed(t=="true")}var u=b.getAttribute("disabled");if(u){d.setDisabled(u=="true")}return d};Blockly.Xml.isFirstRealChild_=function(a,b){for(var c=0,d;d=a.childNodes[c];c++){if(d.nodeType!=3||!d.data.match(/^\s*$/)){return d.tagName&&d.tagName.toLowerCase()==b}}return false};Blockly.Workspace=function(a){this.editable=true;this.topBlocks_=[]};Blockly.Workspace.prototype.dragMode=false;Blockly.Workspace.prototype.scrollX=0;Blockly.Workspace.prototype.scrollY=0;Blockly.Workspace.prototype.trashcan=null;Blockly.Workspace.prototype.fireChangeEventPid_=null;Blockly.Workspace.prototype.createDom=function(){return{}};Blockly.Workspace.prototype.destroy=function(){if(this.svgGroup_){this.svgGroup_.parentNode.removeChild(this.svgGroup_);this.svgGroup_=null}this.svgBlockCanvas_=null;this.svgBubbleCanvas_=null;if(this.trashcan){this.trashcan.destroy();this.trashcan=null}};Blockly.Workspace.prototype.addTrashcan=function(a){if(Blockly.Trashcan&&true){}};Blockly.Workspace.prototype.getCanvas=function(){return this.svgBlockCanvas_};Blockly.Workspace.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_};Blockly.Workspace.prototype.addTopBlock=function(a){this.topBlocks_.push(a);this.fireChangeEvent()};Blockly.Workspace.prototype.removeTopBlock=function(a){var b=false;for(var c,d=0;c=this.topBlocks_[d];d++){if(c==a){this.topBlocks_.splice(d,1);b=true;break}}if(!b){throw"Block not present in workspace's list of top-most blocks."}this.fireChangeEvent()};Blockly.Workspace.prototype.getTopBlocks=function(a){var b=[].concat(this.topBlocks_);if(a&&b.length>1){b.sort(function(a,b){return a.getRelativeToSurfaceXY().y-b.getRelativeToSurfaceXY().y})}return b};Blockly.Workspace.prototype.getAllBlocks=function(){var a=this.getTopBlocks(false);for(var b=0;b<a.length;b++){a=a.concat(a[b].getChildren())}return a};Blockly.Workspace.prototype.clear=function(){Blockly.hideChaff();while(this.topBlocks_.length){this.topBlocks_[0].destroy()}};Blockly.Workspace.prototype.render=function(){var a=this.getAllBlocks();for(var b=0,c;c=a[b];b++){if(!c.getChildren().length){}}};Blockly.Workspace.prototype.getBlockById=function(a){var b=this.getAllBlocks();for(var c=0,d;d=b[c];c++){if(d.id==a){return d}}return null};Blockly.Workspace.prototype.traceOn=function(a){this.traceOn_=a;if(this.traceWrapper_){Blockly.unbindEvent_(this.traceWrapper_);this.traceWrapper_=null}if(a){this.traceWrapper_=Blockly.bindEvent_(this.svgBlockCanvas_,"blocklySelectChange",this,function(){this.traceOn_=false})}};Blockly.Workspace.prototype.highlightBlock=function(a){if(!this.traceOn_){return}var b=this.getBlockById(a);if(!b){return}this.traceOn(false);b.select();this.traceOn(true)};Blockly.Workspace.prototype.fireChangeEvent=function(){if(this.fireChangeEventPid_){clearTimeout(this.fireChangeEventPid_)}var a=this.svgBlockCanvas_;if(a){this.fireChangeEventPid_=setTimeout(function(){Blockly.fireUiEvent(a,"blocklyWorkspaceChange")},0)}};Blockly.Block=function(a,b){this.id="panda";this.titleRow=[];this.outputConnection=null;this.nextConnection=null;this.previousConnection=null;this.inputList=[];this.inputsInline=false;this.rendered=false;this.collapsed=false;this.disabled=false;this.editable=true;this.tooltip="";this.contextMenu=true;this.parentBlock_=null;this.childBlocks_=[];this.isInFlyout=false;this.workspace=a;a.addTopBlock(this);if(b){this.type=b;var c=Blockly.Language[b];if(!c){throw'Error: "'+b+'" is an unknown language block.'}for(var d in c){this[d]=c[d]}}if(typeof this.init=="function"){this.init()}};Blockly.Block.prototype.svg_=null;Blockly.Block.prototype.mutator=null;Blockly.Block.prototype.comment=null;Blockly.Block.prototype.warning=null;Blockly.Block.prototype.initSvg=function(){this.svg_=new Blockly.BlockSvg(this);this.svg_.init();Blockly.bindEvent_(this.svg_.getRootNode(),"mousedown",this,this.onMouseDown_);this.workspace.getCanvas().appendChild(this.svg_.getRootNode())};Blockly.Block.prototype.getSvgRoot=function(){return this.svg_&&this.svg_.getRootNode()};Blockly.Block.dragMode_=0;Blockly.Block.onMouseUpWrapper_=null;Blockly.Block.onMouseMoveWrapper_=null;Blockly.Block.terminateDrag_=function(a){if(Blockly.Block.onMouseUpWrapper_){Blockly.unbindEvent_(Blockly.Block.onMouseUpWrapper_);Blockly.Block.onMouseUpWrapper_=null}if(Blockly.Block.onMouseMoveWrapper_){Blockly.unbindEvent_(Blockly.Block.onMouseMoveWrapper_);Blockly.Block.onMouseMoveWrapper_=null}if(Blockly.Block.dragMode_!=0){Blockly.Block.dragMode_=0;if(Blockly.selected){var b=Blockly.selected;var c=b.getRelativeToSurfaceXY();var d=c.x-b.startDragX;var e=c.y-b.startDragY;b.moveConnections_(d,e);delete b.draggedBubbles_;setTimeout(function(){b.bumpNeighbours_()},Blockly.BUMP_DELAY);Blockly.fireUiEvent(window,"resize");b.workspace.fireChangeEvent()}}};Blockly.Block.prototype.select=function(){if(Blockly.selected){Blockly.selected.unselect()}Blockly.selected=this;this.svg_.addSelect();Blockly.fireUiEvent(this.workspace.getCanvas(),"blocklySelectChange")};Blockly.Block.prototype.unselect=function(){Blockly.selected=null;this.svg_.removeSelect();Blockly.fireUiEvent(this.workspace.getCanvas(),"blocklySelectChange")};Blockly.Block.prototype.destroy=function(a){if(this.outputConnection){this.setParent(null)}else{var b=null;if(this.previousConnection&&this.previousConnection.targetConnection){b=this.previousConnection.targetConnection;this.setParent(null)}if(a&&this.nextConnection&&this.nextConnection.targetConnection){var c=this.nextConnection.targetConnection;var d=this.nextConnection.targetBlock();this.nextConnection.disconnect();d.setParent(null);if(b){b.connect(c)}}}this.workspace.removeTopBlock(this);this.workspace=null;this.rendered=false;if(Blockly.selected==this){Blockly.selected=null;Blockly.Block.terminateDrag_()}for(var e=this.childBlocks_.length-1;e>=0;e--){this.childBlocks_[e].destroy(false)}for(var e=0;e<this.titleRow.length;e++){this.titleRow[e].destroy()}if(this.mutator){this.mutator.destroy()}if(this.comment){this.comment.destroy()}if(this.warning){this.warning.destroy()}for(var e=0;e<this.inputList.length;e++){var f=this.inputList[e];if(f.label){f.label.destroy()}if(f.destroy){f.destroy()}}this.inputList=[];var g=this.getConnections_(true);for(var e=0;e<g.length;e++){var h=g[e];if(h.targetConnection){h.disconnect()}g[e].destroy()}if(this.svg_){this.svg_.destroy();this.svg_=null}};Blockly.Block.prototype.getRelativeToSurfaceXY=function(){var a=0;var b=0;if(this.svg_){var c=this.svg_.getRootNode();do{var d=Blockly.getRelativeXY_(c);a+=d.x;b+=d.y;c=c.parentNode}while(c&&c!=this.workspace.getCanvas())}return{x:a,y:b}};Blockly.Block.prototype.moveBy=function(a,b){var c=this.getRelativeToSurfaceXY();this.svg_.getRootNode().setAttribute("transform","translate("+(c.x+a)+", "+(c.y+b)+")");this.moveConnections_(a,b)};Blockly.Block.prototype.onMouseDown_=function(a){Blockly.svgResize();Blockly.Block.terminateDrag_();this.select();Blockly.hideChaff(this.isInFlyout);if(Blockly.isRightButton(a)){if(Blockly.ContextMenu){this.showContextMenu_(a.clientX,a.clientY)}}else if(!true){return}else{Blockly.removeAllRanges();Blockly.setCursorHand_(true);var b=this.getRelativeToSurfaceXY();this.startDragX=b.x;this.startDragY=b.y;this.startDragMouseX=a.clientX;this.startDragMouseY=a.clientY;Blockly.Block.dragMode_=1;Blockly.Block.onMouseUpWrapper_=Blockly.bindEvent_(Blockly.svgDoc,"mouseup",this,this.onMouseUp_);Blockly.Block.onMouseMoveWrapper_=Blockly.bindEvent_(Blockly.svgDoc,"mousemove",this,this.onMouseMove_);this.draggedBubbles_=[];var c=this.getDescendants();for(var d=0,e;e=c[d];d++){if(e.mutator){var f=e.mutator.getIconLocation();f.bubble=e.mutator;this.draggedBubbles_.push(f)}if(e.comment){var f=e.comment.getIconLocation();f.bubble=e.comment;this.draggedBubbles_.push(f)}if(e.warning){var f=e.warning.getIconLocation();f.bubble=e.warning;this.draggedBubbles_.push(f)}}}a.stopPropagation()};Blockly.Block.prototype.onMouseUp_=function(a){Blockly.Block.terminateDrag_();if(Blockly.selected&&Blockly.highlightedConnection_){Blockly.playAudio("click");Blockly.localConnection_.connect(Blockly.highlightedConnection_);if(this.workspace.trashcan&&this.workspace.trashcan.isOpen){Blockly.Trashcan.close(this.workspace.trashcan)}}else if(this.workspace.trashcan&&this.workspace.trashcan.isOpen){Blockly.playAudio("delete");var b=this.workspace.trashcan;var c=function(){Blockly.Trashcan.close(b)};setTimeout(c,100);Blockly.selected.destroy(false);Blockly.fireUiEvent(window,"resize")}if(Blockly.highlightedConnection_){Blockly.highlightedConnection_.unhighlight();Blockly.highlightedConnection_=null}};Blockly.Block.prototype.showHelp_=function(){var a=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;if(a){open(a)}};Blockly.Block.prototype.duplicate_=function(){var a=Blockly.Xml.blockToDom_(this);var b=Blockly.Xml.domToBlock_(this.workspace,a);var c=this.getRelativeToSurfaceXY();if(Blockly.RTL){c.x-=Blockly.SNAP_RADIUS}else{c.x+=Blockly.SNAP_RADIUS}c.y+=Blockly.SNAP_RADIUS*2;b.moveBy(c.x,c.y);if(b.nextConnection&&b.nextConnection.targetConnection){b.nextConnection.targetBlock().destroy()}};Blockly.Block.prototype.showContextMenu_=function(a,b){if(!this.contextMenu){return}var c=this;var d=[];if(true){var e={text:Blockly.MSG_DUPLICATE_BLOCK,enabled:true,callback:function(){c.duplicate_()}};d.push(e);if(Blockly.Comment&&!this.collapsed){var f={enabled:true};if(this.comment){f.text=Blockly.MSG_REMOVE_COMMENT;f.callback=function(){c.setCommentText(null)}}else{f.text=Blockly.MSG_ADD_COMMENT;f.callback=function(){c.setCommentText("")}}d.push(f)}if(!this.collapsed){for(var g=0;g<this.inputList.length;g++){if(this.inputList[g].type==Blockly.INPUT_VALUE){var h={enabled:true};h.text=this.inputsInline?Blockly.MSG_EXTERNAL_INPUTS:Blockly.MSG_INLINE_INPUTS;h.callback=function(){c.setInputsInline(!c.inputsInline)};d.push(h);break}}}if(this.collapsed){var i={enabled:true};i.text=Blockly.MSG_EXPAND_BLOCK;i.callback=function(){c.setCollapsed(false)};d.push(i)}else if(this.inputList.length){var j={enabled:true};j.text=Blockly.MSG_COLLAPSE_BLOCK;j.callback=function(){c.setCollapsed(true)};d.push(j)}var k={text:this.disabled?Blockly.MSG_ENABLE_BLOCK:Blockly.MSG_DISABLE_BLOCK,enabled:!this.getInheritedDisabled(),callback:function(){c.setDisabled(!c.disabled)}};d.push(k);var l=this.getDescendants().length;if(c.nextConnection&&c.nextConnection.targetConnection){l-=this.nextConnection.targetBlock().getDescendants().length}var m={text:l==1?Blockly.MSG_DELETE_BLOCK:Blockly.MSG_DELETE_X_BLOCKS.replace("%1",l),enabled:true,callback:function(){Blockly.playAudio("delete");c.destroy(true)}};d.push(m)}var n=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;var o={enabled:!!n};o.text=Blockly.MSG_HELP;o.callback=function(){c.showHelp_()};d.push(o);if(this.customContextMenu){this.customContextMenu(d)}Blockly.ContextMenu.show(a,b,d)};Blockly.Block.prototype.getConnections_=function(a){var b=[];if(a||this.rendered){if(this.outputConnection){b.push(this.outputConnection)}if(this.nextConnection){b.push(this.nextConnection)}if(this.previousConnection){b.push(this.previousConnection)}if(a||!this.collapsed){for(var c=0,d;d=this.inputList[c];c++){if(d.type!=Blockly.LOCAL_VARIABLE&&d.type!=Blockly.DUMMY_INPUT){b.push(d)}}}}return b};Blockly.Block.prototype.moveConnections_=function(a,b){if(!this.rendered){return}var c=this.getConnections_(false);for(var d=0;d<c.length;d++){c[d].moveBy(a,b)}if(this.mutator){this.mutator.computeIconLocation()}if(this.comment){this.comment.computeIconLocation()}if(this.warning){this.warning.computeIconLocation()}for(var d=0;d<this.childBlocks_.length;d++){this.childBlocks_[d].moveConnections_(a,b)}};Blockly.Block.prototype.setDragging_=function(a){if(a){this.svg_.addDragging()}else{this.svg_.removeDragging()}for(var b=0;b<this.childBlocks_.length;b++){this.childBlocks_[b].setDragging_(a)}};Blockly.Block.prototype.onMouseMove_=function(a){if(a.type=="mousemove"&&a.x==1&&a.y==0&&a.button==0){a.stopPropagation();return}Blockly.removeAllRanges();var b=a.clientX-this.startDragMouseX;var c=a.clientY-this.startDragMouseY;if(Blockly.Block.dragMode_==1){var d=Math.sqrt(Math.pow(b,2)+Math.pow(c,2));if(d>Blockly.DRAG_RADIUS){Blockly.Block.dragMode_=2;this.setParent(null);this.setDragging_(true)}}if(Blockly.Block.dragMode_==2){var e=this.startDragX+b;var f=this.startDragY+c;this.svg_.getRootNode().setAttribute("transform","translate("+e+", "+f+")");for(var e=0;e<this.draggedBubbles_.length;e++){var g=this.draggedBubbles_[e];g.bubble.setIconLocation(g.x+b,g.y+c)}var h=this.getConnections_(false);var i=null;var j=null;var k=Blockly.SNAP_RADIUS;for(var l=0;l<h.length;l++){var m=h[l];var n=m.closest(k,b,c);if(n.connection){i=n.connection;j=m;k=n.radius}}if(Blockly.highlightedConnection_&&Blockly.highlightedConnection_!=i){Blockly.highlightedConnection_.unhighlight();Blockly.highlightedConnection_=null;Blockly.localConnection_=null}if(i&&i!=Blockly.highlightedConnection_){i.highlight();Blockly.highlightedConnection_=i;Blockly.localConnection_=j}this.workspace.trashcan&&this.workspace.trashcan.onMouseMove(a)}a.stopPropagation()};Blockly.Block.prototype.bumpNeighbours_=function(){var a=this.getRootBlock();var b=this.getConnections_(false);for(var c=0;c<b.length;c++){var d=b[c];if(d.targetConnection&&(d.type==Blockly.INPUT_VALUE||d.type==Blockly.NEXT_STATEMENT)){d.targetBlock().bumpNeighbours_()}var e=d.neighbours_(Blockly.SNAP_RADIUS);for(var f=0;f<e.length;f++){var g=e[f];if(!d.targetConnection||!g.targetConnection){if(g.sourceBlock_.getRootBlock()!=a){g.bumpAwayFrom_(d)}}}}};Blockly.Block.prototype.getParent=function(){return this.parentBlock_};Blockly.Block.prototype.getSurroundParent=function(){var a=this;while(true){do{var b=a;a=a.getParent();if(!a){return null}}while(a.nextConnection&&a.nextConnection.targetBlock()==b);return a}};Blockly.Block.prototype.getRootBlock=function(){var a;var b=this;do{a=b;b=a.parentBlock_}while(b);return a};Blockly.Block.prototype.getChildren=function(){return this.childBlocks_};Blockly.Block.prototype.setParent=function(a){if(this.parentBlock_){var b=this.parentBlock_.childBlocks_;for(var c,d=0;c=b[d];d++){if(c==this){b.splice(d,1);break}}var e=this.getRelativeToSurfaceXY();this.workspace.getCanvas().appendChild(this.svg_.getRootNode());this.svg_.getRootNode().setAttribute("transform","translate("+e.x+", "+e.y+")");this.parentBlock_=null;if(this.previousConnection&&this.previousConnection.targetConnection){this.previousConnection.disconnect()}if(this.outputConnection&&this.outputConnection.targetConnection){this.outputConnection.disconnect()}}else{this.workspace.removeTopBlock(this)}this.parentBlock_=a;if(a){a.childBlocks_.push(this);var f=this.getRelativeToSurfaceXY();if(a.svg_&&this.svg_){a.svg_.getRootNode().appendChild(this.svg_.getRootNode())}var g=this.getRelativeToSurfaceXY();this.moveConnections_(g.x-f.x,g.y-f.y)}else{this.workspace.addTopBlock(this)}};Blockly.Block.prototype.getDescendants=function(){var a=[this];for(var b,c=0;b=this.childBlocks_[c];c++){a=a.concat(b.getDescendants())}return a};Blockly.Block.prototype.getColour=function(){return this.colourHue_};Blockly.Block.prototype.setColour=function(a){this.colourHue_=a;if(this.svg_){this.svg_.updateColour()}if(this.mutator){this.mutator.updateColour()}if(this.comment){this.comment.updateColour()}if(this.warning){this.warning.updateColour()}if(this.rendered){}};Blockly.Block.prototype.appendTitle=function(a,b){if(typeof a=="string"){a=new Blockly.FieldLabel(a)}a.name=b;this.titleRow.push(a);if(this.svg_){a.init(this)}if(this.rendered){this.bumpNeighbours_()}return a};Blockly.Block.prototype.getTitle_=function(a){for(var b=0,c;c=this.titleRow[b];b++){if(c.name===a){return c}}for(var b=0,d;d=this.inputList[b];b++){if(d.label&&d.label.name===a){return d.label}}return null};Blockly.Block.prototype.getTitleText=function(a){var b=this.getTitle_(a);if(b){return b.getText()}return null};Blockly.Block.prototype.getTitleValue=function(a){var b=this.getTitle_(a);if(b){return b.getValue()}return null};Blockly.Block.prototype.setTitleText=function(a,b){var c=this.getTitle_(b);if(c){c.setText(a)}else{throw'Title "'+b+'" not found.'}};Blockly.Block.prototype.setTitleValue=function(a,b){var c=this.getTitle_(b);if(c){c.setValue(a)}else{throw'Title "'+b+'" not found.'}};Blockly.Block.prototype.setTooltip=function(a){this.tooltip=a};Blockly.Block.prototype.setPreviousStatement=function(a){if(this.previousConnection){if(this.previousConnection.targetConnection){throw"Must disconnect previous statement before removing connection."}this.previousConnection.destroy();this.previousConnection=null}if(a){if(this.outputConnection){throw"Remove output connection prior to adding previous connection."}this.previousConnection=new Blockly.Connection(this,Blockly.PREVIOUS_STATEMENT,null)}if(this.rendered){this.bumpNeighbours_()}};Blockly.Block.prototype.setNextStatement=function(a){if(this.nextConnection){if(this.nextConnection.targetConnection){throw"Must disconnect next statement before removing connection."}this.nextConnection.destroy();this.nextConnection=null}if(a){this.nextConnection=new Blockly.Connection(this,Blockly.NEXT_STATEMENT,null)}if(this.rendered){this.bumpNeighbours_()}};Blockly.Block.prototype.setOutput=function(a,b){if(this.outputConnection){if(this.outputConnection.targetConnection){throw"Must disconnect output value before removing connection."}this.outputConnection.destroy();this.outputConnection=null}if(a){if(this.previousConnection){throw"Remove previous connection prior to adding output connection."}this.outputConnection=new Blockly.Connection(this,Blockly.OUTPUT_VALUE,b)}if(this.rendered){this.bumpNeighbours_()}};Blockly.Block.prototype.setInputsInline=function(a){this.inputsInline=a;if(this.rendered){this.bumpNeighbours_()}};Blockly.Block.prototype.setDisabled=function(a){if(this.disabled==a){return}this.disabled=a;this.svg_.updateDisabled();this.workspace.fireChangeEvent()};Blockly.Block.prototype.getInheritedDisabled=function(){var a=this;while(true){var a=a.getSurroundParent();if(!a){return false}else if(a.disabled){return true}}};Blockly.Block.prototype.setCollapsed=function(a){if(this.collapsed==a){return}this.collapsed=a;var b=a?"none":"block";var c=[];for(var d=0,e;e=this.inputList[d];d++){if(e.label){var f=e.label.getRootElement?e.label.getRootElement():e.label}if(e.targetBlock){if(a){e.hideAll()}else{c=c.concat(e.unhideAll())}var g=e.targetBlock();if(g){if(a){g.rendered=false}}}else if(e.getText){e.setVisible(!a)}}if(a&&this.mutator){this.mutator.setPinned(false)}if(a&&this.comment){this.comment.setPinned(false)}if(a&&this.warning){this.warning.setPinned(false)}if(c.length==0){c[0]=this}if(this.rendered){for(var d=0,h;h=c[d];d++){}this.bumpNeighbours_()}};Blockly.Block.prototype.appendInput=function(a,b,c,d){var e=null;if(a){var f=a;var g=null;if(a instanceof Array){f=a[0];g=a[1]}if(typeof f=="string"){f=new Blockly.FieldLabel(f)}e=f;e.name=g}var h;if(b==Blockly.DUMMY_INPUT){h={};h.type=b}else if(b==Blockly.LOCAL_VARIABLE){h.type=Blockly.LOCAL_VARIABLE}else{h=new Blockly.Connection(this,b,d)}h.label=e;h.name=c;this.inputList.push(h);if(this.rendered){this.bumpNeighbours_()}return h};Blockly.Block.prototype.removeInput=function(a){for(var b=0,c;c=this.inputList[b];b++){if(c.name==a){if(c.targetConnection){c.targetBlock().setParent(null)}var d=c.label;if(d){d.destroy()}if(c.destroy){c.destroy()}this.inputList.splice(b,1);if(this.rendered){this.bumpNeighbours_()}return}}throw'Input "'+a+'" not found.'};Blockly.Block.prototype.getInput=function(a){for(var b=0,c;c=this.inputList[b];b++){if(c.name==a){return c}}return null};Blockly.Block.prototype.getInputTargetBlock=function(a){var b=this.getInput(a);return b&&b.targetBlock()};Blockly.Block.prototype.getInputVariable=function(a){var b=this.getInput(a);return b&&b.getText()};Blockly.Block.prototype.setInputVariable=function(a,b){var c=this.getInput(a);if(!c){throw"Input does not exist."}c.setText(b)};Blockly.Block.prototype.setMutator=function(a){if(this.mutator&&this.mutator!==a){this.mutator.destroy()}if(a){a.block_=this;this.mutator=a;if(this.svg_){a.createIcon()}}};Blockly.Block.prototype.getCommentText=function(){if(this.comment){var a=this.comment.getText();return a.replace(/\s+$/,"").replace(/ +\n/g,"\n")}return""};Blockly.Block.prototype.setCommentText=function(a){if(!Blockly.Comment){throw"Comments not supported."}var b=false;if(typeof a=="string"){if(!this.comment){this.comment=new Blockly.Comment(this);b=true}this.comment.setText(a)}else{if(this.comment){this.comment.destroy();b=true}}if(this.rendered){if(b){this.bumpNeighbours_()}}};Blockly.Block.prototype.setWarningText=function(a){if(!Blockly.Warning){throw"Warnings not supported."}var b=false;if(typeof a=="string"){if(!this.warning){this.warning=new Blockly.Warning(this);b=true}this.warning.setText(a)}else{if(this.warning){this.warning.destroy();b=true}}if(this.rendered){if(b){this.bumpNeighbours_()}}};Blockly.Block.prototype.render=function(){};Blockly.Field=function(a){if(a===null){return}this.sourceBlock_=null;if(this.CURSOR){}this.setText(a)};Blockly.Field.NBSP=" ";Blockly.Field.prototype.EDITABLE=true;Blockly.Field.prototype.init=function(a){if(this.sourceBlock_){throw"Field has already been initialized once."}this.sourceBlock_=a;this.group_.setAttribute("class",a.editable?"blocklyEditableText":"blocklyNonEditableText");a.getSvgRoot().appendChild(this.group_);if(a.editable){this.mouseUpWrapper_=Blockly.bindEvent_(this.group_,"mouseup",this,this.onMouseUp_)}};Blockly.Field.prototype.destroy=function(){if(this.mouseUpWrapper_){Blockly.unbindEvent_(this.mouseUpWrapper_);this.mouseUpWrapper_=null}this.sourceBlock_=null;this.group_.parentNode.removeChild(this.group_);this.group_=null;this.textElement_=null;this.borderRect_=null};Blockly.Field.prototype.setVisible=function(a){};Blockly.Field.prototype.getRootElement=function(){return this.group_};Blockly.Field.prototype.render=function(){try{var a=this.textElement_.getBBox()}catch(b){return null}if(a.height==0){a.height=18}var c=a.width+Blockly.BlockSvg.SEP_SPACE_X;var d=a.height;var e=a.x-Blockly.BlockSvg.SEP_SPACE_X/2;var f=a.y;this.borderRect_.setAttribute("width",c);this.borderRect_.setAttribute("height",d);this.borderRect_.setAttribute("x",e);this.borderRect_.setAttribute("y",f);return a};Blockly.Field.prototype.width=function(){var a=null;if(!a){return 0}if(a.width==-Infinity){return 0}return a.width};Blockly.Field.prototype.getText=function(){return this.text_};Blockly.Field.prototype.setText=function(a){this.text_=a;a=a.replace(/\s/g,Blockly.Field.NBSP);if(!a){a=Blockly.Field.NBSP}var b={text:a};if(this.sourceBlock_&&this.sourceBlock_.rendered){this.sourceBlock_.bumpNeighbours_();this.sourceBlock_.workspace.fireChangeEvent()}};Blockly.Field.prototype.getValue=function(){return this.getText()};Blockly.Field.prototype.setValue=function(a){this.setText(a)};Blockly.Field.prototype.onMouseUp_=function(a){if(Blockly.isRightButton(a)){return}else if(Blockly.Block.dragMode_==2){return}this.showEditor_()};Blockly.Field.prototype.setTooltip=function(a){};Blockly.FieldLabel=function(a){this.sourceBlock_=null;this.textElement_={text:""};this.setText(a)};Blockly.FieldLabel.prototype=new Blockly.Field(null);Blockly.FieldLabel.prototype.EDITABLE=false;Blockly.FieldLabel.prototype.init=function(a){if(this.sourceBlock_){throw"Text has already been initialized once."}this.sourceBlock_=a;a.getSvgRoot().appendChild(this.textElement_);this.textElement_.tooltip=this.sourceBlock_;Blockly.Tooltip&&Blockly.Tooltip.bindMouseEvents(this.textElement_)};Blockly.FieldLabel.prototype.destroy=function(){this.textElement_.parentNode.removeChild(this.textElement_);this.textElement_=null};Blockly.FieldLabel.prototype.getRootElement=function(){return this.textElement_};Blockly.FieldLabel.prototype.render=function(){try{var a=this.textElement_.getBBox()}catch(b){return null}if(a.height==0){a.height=18}return a};Blockly.FieldLabel.prototype.setTooltip=function(a){this.textElement_.tooltip=a};Blockly.Connection=function(a,b,c){this.sourceBlock_=a;this.targetConnection=null;this.type=b;if(c){if(!(c instanceof Array)){c=[c]}this.check_=c}else{this.check_=null}this.x_=0;this.y_=0;this.inDB_=false;this.dbList_=this.sourceBlock_.workspace.connectionDBList};Blockly.Connection.prototype.destroy=function(){if(this.targetConnection){throw"Disconnect connection before destroying it."}if(this.inDB_){this.dbList_[this.type].removeConnection_(this)}this.inDB_=false;if(Blockly.highlightedConnection_==this){Blockly.highlightedConnection_=null}if(Blockly.localConnection_==this){Blockly.localConnection_=null}};Blockly.Connection.prototype.connect=function(a){if(this.sourceBlock_==a.sourceBlock_){throw"Attempted to connect a block to itself."}if(this.sourceBlock_.workspace!==a.sourceBlock_.workspace){throw"Blocks are on different workspaces."}if(Blockly.OPPOSITE_TYPE[this.type]!=a.type){throw"Attempt to connect incompatible types."}if(this.type==Blockly.INPUT_VALUE||this.type==Blockly.OUTPUT_VALUE){if(this.targetConnection){throw"Source connection already connected (value)."}else if(a.targetConnection){var b=a.targetBlock();b.setParent(null);function c(a){var c=false;for(var d=0;d<a.inputList.length;d++){if(a.inputList[d].type==Blockly.INPUT_VALUE&&b.outputConnection.checkType_(a.inputList[d])){if(c){return null}c=a.inputList[d]}}return c}var d=this.sourceBlock_;var e;while(e=c(d)){if(e.targetBlock()){d=e.targetBlock()}else{e.connect(b.outputConnection);b=null;break}}if(b){setTimeout(function(){b.outputConnection.bumpAwayFrom_(a)},Blockly.BUMP_DELAY)}}}else{if(this.targetConnection){throw"Source connection already connected (block)."}else if(a.targetConnection){if(this.type!=Blockly.PREVIOUS_STATEMENT){throw"Can only do a mid-stack connection with the top of a block."}var b=a.targetBlock();b.setParent(null);var d=this.sourceBlock_;while(d.nextConnection){if(d.nextConnection.targetConnection){d=d.nextConnection.targetBlock()}else{d.nextConnection.connect(b.previousConnection);b=null;break}}if(b){setTimeout(function(){b.previousConnection.bumpAwayFrom_(a)},Blockly.BUMP_DELAY)}}}var f,g;if(this.type==Blockly.INPUT_VALUE||this.type==Blockly.NEXT_STATEMENT){f=this.sourceBlock_;g=a.sourceBlock_}else{f=a.sourceBlock_;g=this.sourceBlock_}this.targetConnection=a;a.targetConnection=this;g.setParent(f);if(f.rendered){f.svg_.updateDisabled()}if(g.rendered){g.svg_.updateDisabled()}};Blockly.Connection.prototype.disconnect=function(){var a=this.targetConnection;if(!a){throw"Source connection not connected."}else if(a.targetConnection!=this){throw"Target connection not connected to source connection."}a.targetConnection=null;this.targetConnection=null;var b,c;if(this.type==Blockly.INPUT_VALUE||this.type==Blockly.NEXT_STATEMENT){b=this.sourceBlock_;c=a.sourceBlock_}else{b=a.sourceBlock_;c=this.sourceBlock_}if(b.rendered){}if(c.rendered){c.svg_.updateDisabled()}};Blockly.Connection.prototype.targetBlock=function(){if(this.targetConnection){return this.targetConnection.sourceBlock_}return null};Blockly.Connection.prototype.bumpAwayFrom_=function(a){if(Blockly.Block.dragMode_!=0){return}var b=this.sourceBlock_.getRootBlock();var c=false;if(!b.editable){b=a.sourceBlock_.getRootBlock();if(!b.editable){return}a=this;c=true}b.getSvgRoot().parentNode.appendChild(b.getSvgRoot());var d=a.x_+Blockly.SNAP_RADIUS-this.x_;var e=a.y_+Blockly.SNAP_RADIUS*2-this.y_;if(c){e=-e}if(Blockly.RTL){d=-d}b.moveBy(d,e)};Blockly.Connection.prototype.moveTo=function(a,b){if(this.inDB_){this.dbList_[this.type].removeConnection_(this)}this.x_=a;this.y_=b;this.dbList_[this.type].addConnection_(this)};Blockly.Connection.prototype.moveBy=function(a,b){this.moveTo(this.x_+a,this.y_+b)};Blockly.Connection.prototype.highlight=function(){var a;if(this.type==Blockly.INPUT_VALUE||this.type==Blockly.OUTPUT_VALUE){var b=Blockly.RTL?-Blockly.BlockSvg.TAB_WIDTH:Blockly.BlockSvg.TAB_WIDTH;a="m 0,0 v 5 c 0,10 "+ -b+",-8 "+ -b+",7.5 s "+b+",-2.5 "+b+",7.5 v 5"}else{if(Blockly.RTL){a="m 20,0 h -5 l -6,4 -3,0 -6,-4 h -5"}else{a="m -20,0 h 5 l 6,4 3,0 6,-4 h 5"}}var c=this.sourceBlock_.getRelativeToSurfaceXY();var d=this.x_-c.x;var e=this.y_-c.y};Blockly.Connection.prototype.unhighlight=function(){var a=Blockly.Connection.highlightedPath_;a.parentNode.removeChild(a);delete Blockly.Connection.highlightedPath_};Blockly.Connection.prototype.tighten_=function(){var a=Math.round(this.targetConnection.x_-this.x_);var b=Math.round(this.targetConnection.y_-this.y_);if(a!=0||b!=0){var c=this.targetBlock();var d=Blockly.getRelativeXY_(c.getSvgRoot());c.getSvgRoot().setAttribute("transform","translate("+(d.x-a)+", "+(d.y-b)+")");c.moveConnections_(-a,-b)}};Blockly.Connection.prototype.closest=function(a,b,c){function n(b){var c=e[b];if(c.type==Blockly.OUTPUT_VALUE||c.type==Blockly.PREVIOUS_STATEMENT){if(c.targetConnection){return true}}if(!m.checkType_(c)){return true}var d=c.sourceBlock_;do{if(l==d){return true}d=d.getParent()}while(d);var h=f-e[b].x_;var i=g-e[b].y_;var j=Math.sqrt(h*h+i*i);if(j<=a){k=e[b];a=j}return i<a}if(this.targetConnection){return{connection:null,radius:a}}var d=Blockly.OPPOSITE_TYPE[this.type];var e=this.dbList_[d];var f=this.x_+b;var g=this.y_+c;var h=0;var i=e.length-2;var j=i;while(h<j){if(e[j].y_<g){h=j}else{i=j}j=Math.floor((h+i)/2)}h=j;i=j;var k=null;var l=this.sourceBlock_;var m=this;if(e.length){while(h>=0&&n(h)){h--}do{i++}while(i<e.length&&n(i))}return{connection:k,radius:a}};Blockly.Connection.prototype.checkType_=function(a){if(!this.check_||!a.check_){return true}for(var b=0;b<this.check_.length;b++){if(a.check_.indexOf(this.check_[b])!=-1){return true}}return false};Blockly.Connection.prototype.neighbours_=function(a){function k(b){var f=d-c[b].x_;var g=e-c[b].y_;var h=Math.sqrt(f*f+g*g);if(h<=a){i.push(c[b])}return g<a}var b=Blockly.OPPOSITE_TYPE[this.type];var c=this.dbList_[b];var d=this.x_;var e=this.y_;var f=0;var g=c.length-2;var h=g;while(f<h){if(c[h].y_<e){f=h}else{g=h}h=Math.floor((f+g)/2)}f=h;g=h;var i=[];var j=this.sourceBlock_;if(c.length){while(f>=0&&k(f)){f--}do{g++}while(g<c.length&&k(g))}return i};Blockly.Connection.prototype.hideAll=function(){if(this.inDB_){this.dbList_[this.type].removeConnection_(this)}if(this.targetConnection){var a=this.targetBlock().getDescendants();for(var b=0;b<a.length;b++){var c=a[b];var d=c.getConnections_(true);for(var e=0;e<d.length;e++){var f=d[e];if(f.inDB_){this.dbList_[f.type].removeConnection_(f)}}if(c.comment){c.comment.setVisible_(false)}}}};Blockly.Connection.prototype.unhideAll=function(){if(!this.inDB_){this.dbList_[this.type].addConnection_(this)}var a=[];if(this.type!=Blockly.INPUT_VALUE&&this.type!=Blockly.NEXT_STATEMENT){return a}var b=this.targetBlock();if(b){var c;if(b.collapsed){c=[];b.outputConnection&&c.push(b.outputConnection);b.nextConnection&&c.push(b.nextConnection);b.previousConnection&&c.push(b.previousConnection)}else{c=b.getConnections_(true)}for(var d=0;d<c.length;d++){a=a.concat(c[d].unhideAll())}if(a.length==0){a[0]=b}if(b.comment&&b.comment.isPinned()){b.comment.setVisible_(true)}}return a};Blockly.ConnectionDB=function(){};Blockly.ConnectionDB.prototype=new Array;Blockly.ConnectionDB.prototype.addConnection_=function(a){if(a.inDB_){throw"Connection already in database."}var b=0;var c=this.length;while(b<c){var d=Math.floor((b+c)/2);if(this[d].y_<a.y_){b=d+1}else if(this[d].y_>a.y_){c=d}else{b=d;break}}this.splice(b,0,a);a.inDB_=true};Blockly.ConnectionDB.prototype.removeConnection_=function(a){if(!a.inDB_){throw"Connection not in database."}a.inDB_=false;var b=0;var c=this.length-2;var d=c;while(b<d){if(this[d].y_<a.y_){b=d}else{c=d}d=Math.floor((b+c)/2)}b=d;c=d;while(b>=0&&this[b].y_==a.y_){if(this[b]==a){this.splice(b,1);return}b--}do{if(this[c]==a){this.splice(c,1);return}c++}while(c<this.length&&this[c].y_==a.y_);throw"Unable to find connection in connectionDB."};Blockly.ConnectionDB.init=function(a){var b=[];b[Blockly.INPUT_VALUE]=new Blockly.ConnectionDB;b[Blockly.OUTPUT_VALUE]=new Blockly.ConnectionDB;b[Blockly.NEXT_STATEMENT]=new Blockly.ConnectionDB;b[Blockly.PREVIOUS_STATEMENT]=new Blockly.ConnectionDB;a.connectionDBList=b};Blockly.FieldTextInput=function(a,b){Blockly.Field.call(this,a);this.validationFunc_=b};Blockly.FieldTextInput.prototype=new Blockly.Field(null);Blockly.FieldTextInput.prototype.setText=function(a){if(this.validationFunc_){var b=this.validationFunc_(a);if(b!==null){a=b}}Blockly.Field.prototype.setText.call(this,a)};Blockly.FieldTextInput.injectDom_=function(a){Blockly.FieldTextInput.htmlInput_=input};Blockly.FieldTextInput.destroyDom_=function(){var a=Blockly.FieldTextInput.svgForeignObject_;a.parentNode.removeChild(a);Blockly.FieldTextInput.svgForeignObject_=null;Blockly.FieldTextInput.htmlInput_=null};Blockly.FieldTextInput.prototype.CURSOR="text";Blockly.FieldTextInput.prototype.showEditor_=function(){if(false){var a=prompt(Blockly.MSG_CHANGE_VALUE_TITLE,this.text_);if(this.validationFunc_){a=this.validationFunc_(a)}if(a!==null){this.setText(a)}return}var b=this.sourceBlock_.workspace.getCanvas();Blockly.FieldTextInput.injectDom_(b);var c=Blockly.FieldTextInput.htmlInput_;c.value=c.defaultValue=this.text_;c.oldValue_=null;var d=Blockly.FieldTextInput.svgForeignObject_;var e=Blockly.getAbsoluteXY_(this.borderRect_);var f=Blockly.getAbsoluteXY_(b);e.x-=f.x;e.y-=f.y;if(!Blockly.RTL){d.setAttribute("x",e.x+1)}var g=false;if(g){d.setAttribute("y",e.y-1)}else{d.setAttribute("y",e.y-3)}c.focus();c.select();c.onBlurWrapper_=Blockly.bindEvent_(c,"blur",this,this.onHtmlInputBlur_);c.onKeyUpWrapper_=Blockly.bindEvent_(c,"keyup",this,this.onHtmlInputKeyUp_);c.onKeyPressWrapper_=Blockly.bindEvent_(c,"keypress",this,this.resizeEditor_);this.resizeEditor_();this.validate_()};Blockly.FieldTextInput.prototype.onHtmlInputBlur_=function(a){this.closeEditor_(true)};Blockly.FieldTextInput.prototype.onHtmlInputKeyUp_=function(a){if(a.keyCode==13){this.closeEditor_(true)}else if(a.keyCode==27){this.closeEditor_(false)}else{this.resizeEditor_();this.validate_()}};Blockly.FieldTextInput.prototype.validate_=function(){var a=true;var b=Blockly.FieldTextInput.htmlInput_;if(this.validationFunc_){a=this.validationFunc_(b.value)}if(a){Blockly.removeClass_(b,"blocklyInvalidInput")}else{Blockly.addClass_(b,"blocklyInvalidInput")}};Blockly.FieldTextInput.prototype.resizeEditor_=function(){var a=Blockly.FieldTextInput.htmlInput_;var b=a.value;if(b===a.oldValue_){return}a.oldValue_=b;this.setText(b);var c=this.group_.getBBox();if(Blockly.RTL){}};Blockly.FieldTextInput.prototype.closeEditor_=function(a){var b=Blockly.FieldTextInput.htmlInput_;Blockly.unbindEvent_(b.onBlurWrapper_);Blockly.unbindEvent_(b.onKeyUpWrapper_);Blockly.unbindEvent_(b.onKeyPressWrapper_);var c;if(a){c=b.value;if(this.validationFunc_){c=this.validationFunc_(c);if(c===null){c=b.defaultValue}}}else{c=b.defaultValue}this.setText(c);Blockly.FieldTextInput.destroyDom_()};
exports.Blockly=Blockly;